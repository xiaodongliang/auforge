var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,i=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}define("pages/panel/pagesView/editorAPIConnectors/getActions",["lodash","util","core","tpa","coreBi","platform","experiment","wixData"],function(g,i,r,n,d,m,c,t){"use strict";var f=i.dataRouterPagesMenuItemPrefixUtils,P=i.addPageRouterActionUtils,s=["1380b703-ce81-ff05-f115-39571d94dfcd"],b="Pages_Actions_Page_Rename",y=["Pages_Actions_Page_Rename","page_rename"],I=function(e,t,a,n){e.bi.event(d.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:n,category:a})},h=function(e,t,a){e.bi.event(d.events.pages.pagesPanel.tab_clicked_an_item_at_settings_menu,{source:a,category:t})},_=function(a,n,i,s){return function(e){var t=g.defaults(s,{origin:"pagesPanel",publicUrl:a.dsRead.generalInfo.getPublicUrl(),pageRef:e?a.dsRead.pages.getReference(e):null});a.dsActions.platform.notifyApplication(n,{eventType:i,eventPayload:t})}},o=function(t,a,n){return{title:i.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){t({pageId:e,tabType:"page"}),I(a,e,"tabPageInfo",n)},isSettings:!0}},A=function(e){return e.developerMode.isEnabled()||t.isDataModeOn(e)};return{dynamicPage:function(o,a,r,p,n,e,l){if(!e)return null;var t=[];if(A(o)){var i=o.pages.dynamicPages.getDynamicPageActions(a,"pageActions");t=g.map(i,function(e){var n=e.title,t=e.icon,i=e.type,a=e.event,s=_(o,r,a,{routerRef:p});return{title:n,symbolName:i===b?"renameAction":t,onClick:function(e,t){if(i===b){o.pages.data.update(e,{title:t});var a=g.get(o.pages.data.get(e),"title");n!==a&&o.history.debouncedAdd("Rename Page")}else s(e);I(o,e,n,l||"router")},isRename:i===b}})}var s=o.pages.dynamicPages.getDynamicPageActions(a,"pageSettings",[m.constants.pages.page_settings.pageInfo.type,m.constants.pages.page_settings.seo.type]),u=g.map(s,function(t){return{title:t.title,symbolName:t.icon,onClick:function(e){n({pageId:a,tabType:t.type}),I(o,e,t.title,l||"router")},isSettings:!0}});return[].concat(_toConsumableArray(u),_toConsumableArray(t))},tpaPage:function(a,e,t){return t?[o(e,a,"tpa_pages"),{title:i.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){t!==g.get(a.pages.data.get(e),"title")&&(a.pages.data.update(e,{title:t}),a.history.debouncedAdd("Rename Page"),I(a,e,"rename","tpa_pages"))},isRename:!0},{title:i.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(e){a.pages.remove(e,function(){return a.history.add("removing a page",{currentPage:e})}),I(a,e,"delete","tpa_pages")}}]:null},tpaSubPage:function(e,t,a){return a?[o(t,e,"tpa_pages")]:null},popup:function(s,e,o,a){return e?[{title:i.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){var t=s.pages.popupPages.getPopupContainer();s.selection.selectComponentByCompRef(t),s.openComponentPanel("settingsPanel",{initiatorName:"quickActions"}),I(s,e,"open_popup_settings_panel","lightbox")},isSettings:!0},{title:i.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){t!==g.get(s.pages.data.get(e),"title")&&(s.pages.data.update(e,{title:t}),s.history.debouncedAdd("Rename Page"),I(s,e,"rename","lightbox")),a()},isRename:!0},{title:i.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",isDisabled:s.dsRead.language.isCurrentLanguageSecondary(),onClick:function(e){var t=s.pages.popupPages.duplicate(e),a=s.pages.serialize(e),n=r.utils.pageTitleUtils.generateDuplicatedTitle(a.data.title),i=s.dsRead.generalInfo.urlFormat.isSlash()?s.pages.data.pageUriSEO.convertPageNameToUrl:r.utils.pageTitleUtils.convertPageNameToUrl;s.pages.data.update(t.id,{title:n,pageUriSEO:i(n)},!0),c.isOpen("se_multilingual")&&s.dsRead.language.multilingual.isEnabled()&&s.dsActions.waitForChangesApplied(function(){s.dsActions.language.patchDataItemTranslations("masterPage",t.id,function(e){return g.assign({},e,{title:r.utils.pageTitleUtils.generateDuplicatedTitle(e.title)})})}),s.pages.navigateTo(t.id),s.history.add("popup page was duplicated",{currentPage:e}),o(t.id),I(s,e,"duplicate","lightbox")}},{title:i.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(e,t){s.dsActions.waitForChangesApplied(function(){s.pages.remove(e,g.partial(s.history.add,"removed popup"))}),s.bi.event(d.events.topbar.pages.page_or_pop_up_deleted,{page_or_popup:"pop up",page_popup_string_id:e,page_popup_name:t}),I(s,e,"delete","lightbox")}}]:null},tpaTab:function(e,t,a){if(!g.includes(s,t)||!a)return null;return[{title:i.translate("NewPages_Panel_StorePages_Panel_Manage"),symbolName:"settingsAction",onClick:function(){n.superApps.openDashboardUrl(n.superApps.superAppsConstants.ECOM_APP_DEF_ID),h(e,"manage","tpa_pages")}}]},menuTab:function(t,e,a){if(!a||!e)return null;var n=t.pages.dynamicPages.getActionByAppDefId(e,"routerActions"),i=g.get(t.dsRead.platform.getAppDataByAppDefId(e),"applicationId");return g.map(n,function(e){return{title:e.title,symbolName:e.icon,onClick:e.callback||_(t,i,e.event)}})},router:function(r,e,p,t,l,a,n){var i="Data"===n;if(!e||!A(r)&&!a||!i&&!r.developerMode.isEnabled()&&!a)return null;if(c.isOpen("se_groupDataRouterPagesByNamespaceOrCollection")&&f.isValidPrefix(t)){var s=P.getAddDataRouterPageAction(r);return g.isUndefined(s)?[]:[{title:s.title,symbolName:s.icon,type:s.type,event:s.event,onClick:function(){r.bi.event(d.events.pages.pagesPanel.tab_clicked_an_item_at_settings_menu,{source:"router",category:s.title});var e=r.dsRead.platform.getAppDataByAppDefId(r.dsRead.platform.editorApps.DATA_BINDING.appDefId).applicationId;r.dsActions.platform.notifyApplication(e,{eventType:s.event,eventPayload:g.assign({},f.getAddPageEventPayloadByPrefix(t),{origin:"pagesPanel"})})}}]}var u=r.dsRead.routers.getRouterRef.byPrefix(t),o=r.pages.dynamicPages.getRouterActionByPrefix(t);return g.map(o,function(e){var t=e.title,a=e.icon,n=e.event,i=e.type,s=e.callback,o=_(r,p,n,{routerRef:u});return{title:t,symbolName:a,type:i,event:n,onClick:function(e){s?s(e):o(e),h(r,t,l||"router")}}})},application:function(r,e,t,p){if(!t||!e)return null;var l=g.get(r.dsRead.platform.getAppDataByAppDefId(e),"applicationId"),a=r.pages.appPages.getApplicationActions(e);return g.map(a,function(e){var t=e.title,a=e.icon,n=e.event,i=e.callback,s=e.type,o=_(r,l,n);return{title:t,type:s,event:n,symbolName:a,onClick:function(e){i?i(e):o(e),h(r,t,p)}}})},applicationPage:function(r,a,e,t,p,n,l){if(!t)return null;var u=g.get(r.dsRead.platform.getAppDataByAppDefId(e),"applicationId"),i=r.pages.getReference(a),s=r.pages.appPages.getPageActions(e,i),o=g.map(s,function(e){var i=e.title,t=e.icon,s=e.type,a=e.event,o=_(r,u,a),n=g.includes(y,s);return{title:i,symbolName:n?"renameAction":t,onClick:function(e,t){var a=r.dsRead.data.getById(e);if("BasicMenuItem"===a.type&&(e=a.link.pageId.replace("#","")),s===b){r.pages.data.update(e,{title:t}),l();var n=g.get(r.pages.data.get(e),"title");i!==n&&r.history.debouncedAdd("Rename Page")}else o(e);I(r,e,i,p||"router")},isRename:s===b,isRemove:"page_remove"===s}}),d=r.pages.appPages.getPageSettings(e,[m.constants.pages.page_settings.pageInfo.type,m.constants.pages.page_settings.seo.type],i),c=g.map(d,function(t){return{title:t.title,symbolName:t.icon,onClick:function(e){n({pageId:a,tabType:t.type}),I(r,e,t.title,p)},isSettings:!0}});return[].concat(_toConsumableArray(c),_toConsumableArray(o))},getOnClickApplicationNotification:_,signup:function(a,t,e){return[{title:i.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){t({pageId:e,tabType:"page",isCustomSignup:!0}),I(a,e,"tabPageInfo","custom_signup")},isSettings:!0}].concat(e?[{title:i.translate("Pages_Actions_Page_Edit"),symbolName:"editAction",onClick:function(e){a.panelManager.closeAllPanels(),a.pages.navigateTo(e,function(){var e=a.pages.popupPages.getCurrentPopup(),t=g.find(a.components.getChildren(e,!0),function(e){return"wysiwyg.viewer.components.FormContainer"===a.components.getType(e)});a.selection.selectComponentByCompRef(t)}),I(a,e,"edit","custom_signup")},isSettings:!0},{title:i.translate("Pages_Actions_Page_Delete_Custom_Signup"),symbolName:"deleteAction",onClick:function(e,t){a.dsActions.waitForChangesApplied(function(){a.pages.remove(e,function(){a.siteMembers.setCustomSignupPageId(null),a.history.add("removed custom signup page")},g.noop,!0)}),a.bi.event(d.events.topbar.pages.page_or_pop_up_deleted,{page_or_popup:"pop up",page_popup_string_id:e,page_popup_name:t}),I(a,e,"delete","custom_signup")}}]:[])}}}),define("pages/utils/pageCategories",["lodash","util"],function(t,e){"use strict";var a=e.translate;return{MAIN_MENU:{id:"CUSTOM_MAIN_MENU",title:a("NewPages_Panel_Left_SiteMenu_Label"),flatMenuTitle:a("NewPages_QuickNav_Site_Pages_Label"),helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",mobileHelpId:"1aeed4d9-19a1-44b7-beec-7bc38a9d4d99",group:"menus"},MEMBERS_MENU:{id:"MEMBERS_SUB_MENU",title:a("NewPages_Panel_Left_MembersMenu_Label"),helpId:"ab4d4af2-0a5a-4ad9-93fe-dbf42f22d2ca",mobileHelpId:"8fa70d57-3d09-4f0b-a966-7ef2475e3f1b",group:"menus"},MENUS:{id:"MENUS",group:"menus",helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",biCategory:"custom menu",getBiCategory:function(e){return t.includes(["CUSTOM_MAIN_MENU","MEMBERS_SUB_MENU"],e)?e:"CUSTOM_MENU"},titleAdd:a("NewPages_Panel_AddPage_Button")},SPECIAL_PAGES:{group:"special_pages",getBiCategory:function(e,t){if(e===t)return"members"}},APPLICATION_PAGES:{group:"application_pages"},MEMBERS_PAGES:{helpId:"7710f007-cbdb-4b77-bb8b-fd4d65424ab1"},TPA_PAGES:{id:"TPA_PAGES",group:"tpa_pages",titleAdd:a("NewPages_Panel_AddPage_Button"),getBiCategory:function(e){return"tpa_"+e}},DYNAMIC_PAGES_INTRO:{id:"DYNAMIC_PAGES_INTRO",helpId:"4d88ab53-0157-47aa-9c19-0d5762fcb82b",title:"NewPages_Panel_Left_DynamicPage_Label",group:"dynamic_pages",biCategory:"dynamic_page_intro"},DYNAMIC_PAGES:{id:"DYNAMIC_PAGES",helpId:"1e76f0cc-531a-45b3-bfe0-8907cf391fca",mobileHelpId:"4eda8656-f16f-4ddd-9c80-4b80eef09686",group:"dynamic_pages",biCategory:"router"},ROUTER_PAGES:{id:"ROUTER_PAGES",helpId:"aa6cebfb-a948-4767-bb0e-a60cb8fa9146",mobileHelpId:"4b873e86-b218-4589-b84b-8070c775f3c4",group:"dynamic_pages",biCategory:"router"},SIGNUP:{id:"SIGNUP",title:"NewPages_Panel_Signup_Title",biCategory:"signup",helpId:"e8c26342-9c6b-4f7d-ae71-8e105009724b"},POPUPS:{id:"POPUPS",title:"POPUPS_SiteStructure_Panel_Popups",helpId:"24659a21-11c8-41e1-9752-5822677154a0",mobileHelpId:"05438eeb-262a-49e0-a59b-dfda242c5609",group:"popups",biCategory:"lightbox",titleAdd:a("POPUPS_SiteStructure_Panel_Button_Add")},TRANSITIONS:{id:"TRANSITIONS",title:"NewPages_Panel_Transitions_Title",group:"transitions",biCategory:"transitions"}}}),define("pages/panel/menuView/utils/menuDataGetterUtil",["pages/utils/pageCategories"],function(s){"use strict";var o="CUSTOM_MAIN_MENU";return{getMenuTabNameIfApplicable:function(e,t,a,n,i){return t===o?i?s.MAIN_MENU.flatMenuTitle:s.MAIN_MENU.title:a===e?s.MEMBERS_MENU.title:n},getHelpIdForMenu:function(e,t,a,n){return e===o?n?s.MAIN_MENU.helpId:s.MAIN_MENU.mobileHelpId:t===a?n?s.MEMBERS_MENU.helpId:s.MEMBERS_MENU.mobileHelpId:s.MENUS.helpId}}}),define("pages/panel/getPages",["lodash","util","core","pages/utils/pageCategories","experiment","pages/panel/menuView/utils/menuDataGetterUtil"],function(g,l,n,m,u,r){"use strict";var d=n.utils.tpaTypeUtils,c="1380b703-ce81-ff05-f115-39571d94dfcd",f=[c],P=function(e){return g.get(e,"pageSecurity.requireLogin")?"membersPagePermission":g.get(e,"pageSecurity.dialogLanguage")?"passwordPagePermission":null};return{dynamicPages:function(e,t){return g.map(t,function(e){var t=e.id,a=e.label,n=e.pageData;return{id:t,title:a,permissionSymbol:P(n)}})},popups:function(e){return g.map(e.pages.popupPages.getDataListOrdered(),function(e){return{id:e.id,title:e.title,managingAppDefId:e.managingAppDefId,biCategory:m.POPUPS.biCategory}})},tpas:function(o,e){if(u.isOpen("pagesPanelPlatformStoresTab"))return[];var t=g.filter(e,function(e){return 0<e.tpaApplicationId}),r=g.groupBy(t,"tpaApplicationId"),p=function(e,t,a){return g(e).reject(function(e){return d.isPageNotVisibleInPagesMenu(o.dsRead,e)}).filter(function(e){return d.isTPASpecialPage(o.dsRead,e,!0)}).map(function(e){return{id:e.id,title:e.title,isSubPage:!0,permissionSymbol:P(e),biCategory:t,info:function(e,t){var a=n.utils.wixStoreTypeUtils;if(t===c){if(a.isWixStoreProductPage(e))return l.translate("Pages_Store_Product_Info_WhatisText");if(a.isWixStoreCartPage(e))return l.translate("Pages_Store_Cart_Info_WhatisText");if(a.isWixStoreThankYouPage(e))return l.translate("Pages_Store_Thankyou_Info_WhatisText")}}(e,a)}}).value()};return g(r).thru(Object.keys).map(function(e){var t=o.dsRead.tpa.app.getData(e),a=t.appDefinitionId,n=t.appDefinitionName,i=t.helpId,s=m.TPA_PAGES.getBiCategory(a);return g.includes(f,a)?{pagesData:p(r[e],s,a),id:a,typeSymbol:"storesPageType",title:l.translate("NewPages_Panel_Left_StorePages_Label"),helpId:"59a4a620-30b2-4c93-a27a-c9290141738c",mobileHelpId:"2d2d9e55-a955-4f45-97c4-76fc2436f297",biCategory:s}:u.isOpen("pagesAllTpas")?{pagesData:p(r[e],s,a),id:a,title:n,helpId:i,biCategory:s}:null}).compact().value()},routers:function(c){return g(c.pages.dynamicPages.getMenuItems()).reject(function(e){var t=e.items;return g.isEmpty(t)}).map(function(e){var t=e.id,a=e.label,n=e.items,i=e.prefix,s=e.routerType,o=c.dsRead.pages.getReference(n[0].id),r=c.dsRead.routers.getRouterRef.byPage(o),p=c.dsRead.routers.get.byRef(r).appDefinitionId,l=c.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,u=p===l,d=u?m.SPECIAL_PAGES.getBiCategory(p,l):m.DYNAMIC_PAGES.biCategory;return{id:t,title:a,pagesData:n,prefix:i,applicationId:g.get(c.dsRead.platform.getAppDataByAppDefId(p),"applicationId"),isSpecial:u,biCategory:d,routerType:s}}).compact().value()},pagesManagedByApps:function(i,e,s){var t,a=g.reject(e,function(e){return d.isPageNotVisibleInPagesMenu(i.dsRead,e)}),n=g.map(i.dsRead.platform.getInstalledEditorApps(),"appDefinitionId"),o=g.groupBy(a,"managingAppDefId"),r=(t=n,g.filter(t,function(e){switch(e){case"14bcded7-0066-7c35-14d7-466cb3f09103":return u.isOpen("pagesPanelBlogTab");case"140603ad-af8d-84a5-2c80-a0f60cb47351":return u.isOpen("pagesPanelEventsTab");case c:return u.isOpen("pagesPanelPlatformStoresTab");default:return!0}}));return g(r).map(function(e){var t=o[e]||[],a=i.pages.appPages.getApplicationSettings(e),n=i.dsRead.platform.getAppDataByAppDefId(e);return 0<t.length?{id:e,title:g.get(a,"displayName")||g.get(n,"appDefinitionName"),pagesData:function(n,e){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return g(e).map(function(e){var t=n.pages.getReference(e.id),a=g.defaults(n.pages.appPages.getPageDescriptor(e.managingAppDefId,t),{orderIndex:0});return{id:e.id,title:e.title,permissionSymbol:P(e),pageDescriptor:i?a:g.pick(a,"orderIndex")}}).sortBy(function(e){return-e.pageDescriptor.orderIndex}).value()}(i,t,s),biCategory:e,helpId:g.get(a,"helpId")}:a&&a.emptyState?{id:e,title:g.get(a,"displayName"),emptyStateUrl:g.get(a.emptyState,"url"),biCategory:e,helpId:g.get(a.emptyState,"helpId")||a.helpId}:null}).compact().value()},menus:function(n,i,s){var o=n.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,e=n.dsRead.menu.getAll();return g(e).filter(["id","CUSTOM_MAIN_MENU"]).map(function(e){var t=n.dsRead.platform.getAppDataByApplicationId(e.appId).appDefinitionId,a=n.menus.getExtendedMenuItemsTree(e,i);return{id:e.id,appDefId:t,menuItems:a.items,multiPageMenu:a.multiplePagesInMenu,title:r.getMenuTabNameIfApplicable(o,e.id,t,e.name,s)}}).value()}}}),define("pages/panel/pagesView/page/page.rt",["react","lodash","util","baseUILib","santa-editor-symbols"],function(i,a,t,s,o){"use strict";return function(){return i.createElement("div",{className:"page-pp "+a({selected:this.props.isSelected}).transform(function(e,t,a){t&&e.push(a)},[]).join(" ")},null===this.state.inputValue?i.createElement("div",{className:"title-container",key:"title-container-page-pp",onClick:function(){this.props.onClick(this.props.id)}.bind(this),onDoubleClick:this.onDoubleClick},i.createElement("div",{className:"left-container"},i.createElement(s.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},this.props.typeSymbol?i.createElement(o.symbol,{name:this.props.typeSymbol,className:"page-entry-symbol",key:"typeSymbol-pp"}):null),i.createElement(s.TooltipOnEllipsis,{marginTop:5,contentClassName:"title"},this.props.title)),i.createElement("div",{className:"right-container"},this.props.permissionSymbol?i.createElement(o.symbol,{name:this.props.permissionSymbol,key:"permissionSymbol-pp"}):null,this.props.actions&&1<this.props.actions.length?function(){var e=this.getActions(),t=this.getSettingsActions();return i.createElement.apply(this,[s.ContextMenu,{className:"context-menu flat page-actions",key:"page-context-menu",automationId:"page-context-menu",onToggle:this.handleContextMenuToggle},a.map(t,function(e,t,a,n){return i.createElement(s.ContextMenuAction,{onClick:function(e,t,a,n){this.handleClickAction(a)}.bind(this,e,t,a,n),key:"action-"+a.title,automationId:"action-"+a.title,className:"page-settings-action-pp"},i.createElement(o.symbol,{name:a.symbolName}),i.createElement("span",{},a.title))}.bind(this,e,t)),a.isEmpty(e)||a.isEmpty(t)?null:i.createElement(s.Divider,{key:"divider"}),a.map(e,function(e,t,a,n){return i.createElement(s.ContextMenuAction,{onClick:function(e,t,a,n){this.handleClickAction(a)}.bind(this,e,t,a,n),key:"action-"+a.title,automationId:"action-"+a.title},i.createElement(o.symbol,{name:a.symbolName}),i.createElement("span",{},a.title))}.bind(this,e,t))])}.apply(this,[]):null,this.props.actions&&1===this.props.actions.length?function(){var e=this.props.actions[0];return i.createElement(s.Button,{className:"single-action page-actions",onClick:function(e){this.handleClickAction(e)}.bind(this,e),key:"page-single-action"},i.createElement(o.symbol,{name:e.symbolName}))}.apply(this,[]):null)):null,null!==this.state.inputValue?function(){var e=t.validate.pageNameValidator(this.state.inputValue);return i.createElement("div",{className:"input-button-container",key:"input-container-page-pp"},i.createElement(s.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!e,invalidMessage:t.translate(e),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleBlurInput,autoSelect:!0}),i.createElement(s.Button,{className:"done-button",disabled:e},"\n            ",t.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/pagesView/page/page",["react","prop-types","lodash","util","coreBi","pages/panel/pagesView/page/page.rt"],function(t,e,n,i,s,o){"use strict";var a=function(e){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={inputValue:e.mountInRenameMode?e.title:null},t.handleClickAction=function(e){e.isRename?t.openRenameMode():e.onClick(t.props.id,t.props.title)},t.handleContextMenuToggle=function(e){e&&t.props.biEvent(s.events.pages.pagesPanel.page_actions_click,{page_id:t.props.id,source:t.props.biCategory})},t.openRenameMode=function(){return t.setState({inputValue:t.props.title})},t.onDoubleClick=function(){n.filter(t.props.actions,"isRename")[0]&&t.props.renameEnabled&&t.openRenameMode()},t.handleChangeInput=function(e){return t.setState({inputValue:e})},t.handleBlurInput=function(){var e=!i.validate.pageNameValidator(t.state.inputValue)?t.state.inputValue:t.props.title;n.filter(t.props.actions,"isRename")[0].onClick(t.props.id,e),t.setState({inputValue:null})},t.getSettingsActions=function(){return n.filter(t.props.actions,"isSettings")},t.getActions=function(){return n.reject(t.props.actions,"isSettings")},t}return _inherits(a,t.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.inputValue===this.props.title,a=e.title!==this.props.title,n=null!==this.state.inputValue;(t&&a||e.mountInRenameMode!==this.props.mountInRenameMode&&!n)&&this.setState({inputValue:e.title})}},{key:"render",value:function(){return o.call(this)}}]),a}();return a.displayName="Page",a.propTypes={id:e.string.isRequired,title:e.string.isRequired,onClick:e.func.isRequired,actions:e.arrayOf(e.shape({title:e.string.isRequired,onClick:e.func.isRequired,symbolName:e.string.isRequired,isRename:e.bool})),isSelected:e.bool,info:e.string,mountInRenameMode:e.bool,renameEnabled:e.bool.isRequired,typeSymbol:e.string,permissionSymbol:e.string,biEvent:e.func.isRequired,biCategory:e.string.isRequired},a}),define("pages/panel/pagesView/pagesView.rt",["react","lodash","util","baseUILib","santa-editor-symbols","pages/panel/pagesView/page/page","platformPanels"],function(n,t,e,a,i,s,o){"use strict";return function(){return function(){var e=this.props.onClickAdd&&!this.props.emptyStateUrl;return n.createElement("div",{className:"pages-view-pp"},n.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp,className:"header light"},n.createElement("span",{className:"title-pages-view-pp"},this.props.title)),n.createElement("div",{className:t({"pages-container-outer":!0,"with-footer":e}).transform(function(e,t,a){t&&e.push(a)},[]).join(" ")},n.createElement(a.CustomScroll,{},0<this.props.pages.length?n.createElement.apply(this,["ul",{className:"pages-container-inner",key:"pages-container"},t.map(this.props.pages,function(e,t,a){return n.createElement("li",{className:"page-container",key:"li-"+t.id},n.createElement(s,{id:t.id,title:t.title,info:t.info,typeSymbol:t.typeSymbol,permissionSymbol:t.permissionSymbol,mountInRenameMode:this.props.renamedItemId===t.id,actions:t.actions,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renameEnabled:this.props.renameEnabled,isSelected:this.props.selectedPageId===t.id,onClick:this.handleClickItem}))}.bind(this,e))]):null,this.props.emptyStateUrl?n.createElement(o.PlatformPanelApplicationFrame,{token:this.generatePanelToken(),key:"emptyStatePanel",url:this.props.emptyStateUrl,initialData:this.props.initialData,panelClass:"appEmptyState"}):null)),e?n.createElement("footer",{className:"add-container",key:"add-container"},n.createElement(a.Button,{className:"add-button",onClick:this.props.onClickAdd},n.createElement(i.symbol,{name:"addPage"}),n.createElement("span",{},this.props.titleAdd))):null)}.apply(this,[])}}),define("pages/panel/pagesView/pagesView",["lodash","react","prop-types","platform","pages/panel/pagesView/pagesView.rt"],function(e,t,a,n,i){"use strict";var s=function(e){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleClickItem=function(e){t.props.navigateTo(e)},t}return _inherits(a,t.Component),_createClass(a,[{key:"generatePanelToken",value:function(){return n.tokenService.generatePanelToken(this.props.appDefinitionId)}},{key:"render",value:function(){return i.call(this)}}]),a}();return s.displayName="PagesView",s.propTypes={title:a.string.isRequired,onClose:a.func.isRequired,onHelp:a.func.isRequired,navigateTo:a.func.isRequired,pages:a.arrayOf(a.shape({id:a.string.isRequired,title:a.string.isRequired,info:a.string,actions:a.arrayOf(a.shape({title:a.string.isRequired,onClick:a.func.isRequired,symbolName:a.string.isRequired,isRename:a.bool})),typeSymbol:a.string,permissionSymbol:a.string})).isRequired,selectedPageId:a.string,titleAdd:a.string,onClickAdd:a.func,onShowSettings:a.func,renamedItemId:a.string,renameEnabled:a.bool.isRequired,biEvent:a.func.isRequired,biCategory:a.string.isRequired},s}),define("pages/panel/pagesView/editorAPIConnectors/signupView",["lodash","util","coreBi","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView"],function(c,l,g,m,u,e){"use strict";var f=function(e,t){var a,n,i,s,o=e.editorAPI,r=e.dsRead.siteMembers.getCustomSignupPageId(),p=u.signup(o,t,r);return[{id:r||"defaultSignup",typeSymbol:"regularPageType",title:(a=o,n=a.pages.popupPages.getDataList(),i=c.get(c.find(n,["managingAppDefId","5f4fa4f1-5afd-4ac0-8a85-e5ac1d2b9b7d"]),"id"),s=a.dsRead.siteMembers.getCustomSignupPageId(),s?i===s?l.translate("NewPages_Member_Signup_Custom_Title"):l.translate("NewPages_Member_Signup_Developer_Title"):l.translate("NewPages_Member_Signup_Default_Title")),actions:p}]},t=l.hoc,a=t.connect,n=t.renderWhenMutated;return a(t.STORES.EDITOR_API,function(e,t){var a,n,i,s,o,r=e.editorAPI,p=e.dsRead,l=t.biPanelName,u=t.onShowSettings,d=t.onHelp;return{pages:f({editorAPI:r,dsRead:p},u),navigateTo:(a={editorAPI:r,dsRead:p},n=l,i=u,s=a.editorAPI,o=a.dsRead,function(){var e=o.siteMembers.getCustomSignupPageId();e&&e!==o.pages.getFocusedPageId()?(s.pages.navigateTo(e,function(){s.selection.selectComponentByCompRef(s.pages.popupPages.getPopupContainer(e))}),s.bi.event(g.events.pages.navigate_to_page,{page_id:e,panel_name:n,category:m.SIGNUP.biCategory})):e||i({pageId:e,tabType:"page",isCustomSignup:!0})}),biEvent:r.bi.event,biCategory:m.SIGNUP.biCategory,renameEnabled:!1,onHelp:c.partial(d,m.SIGNUP.helpId)}})(n(e))}),define("pages/panel/pagesView/editorAPIConnectors/popupView",["lodash","util","stateManagement","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","pages/panel/pagesView/pagesView"],function(c,g,i,d,m,f,e){"use strict";var t=g.hoc,a=t.connect,n=t.renderWhenMutated,s=t.STORES.EDITOR_API,P=function(e,t){var a=function(e,t){return c.template(g.translate(e))(t)},n=t.length,i=a("Pages_Menu_Popup_Tooltip_Start_Section",{$PAGE_NAME:c.truncate(c.head(t))}),s=a("Pages_Menu_Popup_Tooltip_End_Section",{$PAGE_NAME:c.truncate(c.last(t))}),o=void 0;if(1===n)o=i;else if(2===n)o=i+" "+s;else{o=c.reduce(c.slice(t,1,-1),function(e,t){return e+" "+a("Pages_Menu_Popup_Tooltip_Middle_Section",{$PAGE_NAME:c.truncate(t)})},i)+" "+s}return o},o=function(e,t,a,n){var s,i,o,r,p,l,u,d=c.map(t,function(e){return{id:e.id,title:e.title,typeSymbol:"popupPageType"}});return n?(i=d,o=a,r=(s=e).pages.popupPages.getOpenBehaviorsForPopups(),p=c.zipObject(c.map(o,"id"),c.map(o,"title")),l=c.groupBy(r,"popupId"),u=s.dsRead.siteSegments.getSiteStructureId(),c.map(i,function(e){var t=l[e.id],a=!!t&&t[0].pageId===u,n=c.map(t,"pageId");if(a)return e.info=g.translate("Pages_Menu_Popup_Tooltip_Set_To_All"),e;var i=c.map(n,c.partial(c.get,p));return 0<i.length&&(e.info=P(s,i)),e})):d},b=function(e,t,a){var n=a.editorAPI;n.store.dispatch(i.editorPlugins.userPreferences.actions.setSessionUserPreferences("addPanelCategoryIdOnClose","popup")),n.store.dispatch(i.editorPlugins.leftBar.actions.openAddPanel()),n.bi.event(f.events.pages.pagesPanel.add_page_selection_click,{category:"popup",source:"lightbox"})};return a(s,function(e,t){var a=e.editorAPI,n=t.popups,i=t.pagesData,s=t.isDesktop;return{pages:o(a,n,i,s),renameEnabled:s,titleAdd:d.POPUPS.titleAdd,biCategory:d.POPUPS.biCategory}},function(t,e){var i,s,o,a=e.onHelp,n=e.biPanelName,r=e.isDesktop,p=e.onItemAdded,l=e.onRename,u=t((i=r,s=p,o=l,function(e,t,a){var n=a.editorAPI;return m.popup(n,i,s,o)}));return{onClickAdd:r?function(){return t(b)}:null,navigateTo:function(e){return t((i=e,s=n,function(e,t,a){var n=a.editorAPI;n.dsRead.pages.getFocusedPageId()!==i&&(n.pages.navigateTo(i,function(){n.selection.selectComponentByCompRef(n.pages.popupPages.getPopupContainer(i))}),n.bi.event(f.events.pages.navigate_to_page,{page_id:i,panel_name:s,category:d.POPUPS.biCategory}))}));var i,s},onHelp:r?c.partial(a,d.POPUPS.helpId):c.partial(a,d.POPUPS.mobileHelpId),biEvent:function(){t(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,a){var n;return(n=a.editorAPI.bi).event.apply(n,i)}}.apply(void 0,arguments))},popupsActions:c.reject(u,"isDisabled")}},function(e,t,a){var n=c.assign({},e,{pages:c.map(e.pages,function(e){return c.assign({},e,{actions:t.popupsActions})})}),i=c.omit(t,["popupsActions"]);return c.assign({},a,n,i)})(n(e))}),define("pages/panel/pagesView/editorAPIConnectors/dynamicPagesView",["experiment","lodash","util","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages","coreBi","pages/panel/pagesView/pagesView","wixData"],function(d,S,e,C,T,E,R,t,c){"use strict";var a=e.hoc,n=a.connect,i=a.renderWhenMutated,s=a.STORES.EDITOR_API,g=e.dataRouterPagesMenuItemPrefixUtils,m=e.addPageRouterActionUtils,M={},f={},k=function(t,e,a,n,i,s,o,r){var p=!t.developerMode.isEnabled()&&!c.isDataModeOn(t);if(!n||p&&f[e])return{title:null,onClick:null};var l=m.findAddPageAction(i);if(!l)return{title:null,onClick:null};var u=T.getOnClickApplicationNotification(t,a,l.event,{prefix:s,routerRef:o});return{title:l.title,onClick:function(e){t.bi.event(R.events.pages.pagesPanel.add_page_selection_click,{category:"dynamic page",source:r||"router"}),d.isOpen("se_groupDataRouterPagesByNamespaceOrCollection")&&g.isValidPrefix(s)?t.dsActions.platform.notifyApplication(a,{eventType:l.event,eventPayload:S.assign({},g.getAddPageEventPayloadByPrefix(s),{origin:"pagesPanel"})}):u(e)}}},D=S.once(function(e){M[e.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId]="membersAction",M[e.dsRead.platform.editorApps.DYNAMIC_PAGES.appDefId]="routerPageType",M[e.dsRead.platform.editorApps.DATA_BINDING.appDefId]="dynamicPageType"}),N=S.once(function(e){f[e.dsRead.platform.editorApps.DYNAMIC_PAGES.appDefId]=!0,f[e.dsRead.platform.editorApps.DATA_BINDING.appDefId]=!0});return n(s,function(e,t){var a=e.editorAPI,n=t.router,i=n.title,s=n.pagesData,o=n.prefix,r=n.biCategory,p=n.actions,l=t.onShowSettings,u=t.isDesktop;D(a),N(a);var d,c,g,m,f,P,b,y,I=a.dsRead.pages.getReference(s[0].id),h=a.dsRead.routers.getRouterRef.byPage(I),_=a.dsRead.routers.get.byRef(h).appDefinitionId,A=S.get(a.dsRead.platform.getAppDataByAppDefId(_),"applicationId"),v=k(a,_,A,u,p,o,h,r);return{title:i,pages:(d=a,c=s,g=A,m=h,f=l,P=u,b=_,y=E.dynamicPages(d,c,g,m,f,P),S.map(y,function(e){return{id:e.id,title:e.title,permissionSymbol:e.permissionSymbol,typeSymbol:M[b]}})),renameEnabled:u,titleAdd:v.title,biCategory:r||C.ROUTER_PAGES.biCategory}},function(e,t){var p,l,u,d,c,n,g,m,f,i,r,P,b,a=t.router,s=a.pagesData,o=a.biCategory,y=a.actions,I=a.prefix,h=t.onShowSettings,_=t.isDesktop,A=t.onHelp,v=t.biPanelName;return{onHelp:e((r=_,P=s,b=A,function(e,t,a){var n=a.editorAPI,i=n.dsRead.pages.getReference(P[0].id),s=n.dsRead.routers.getRouterRef.byPage(i),o=n.dsRead.routers.get.byRef(s).appDefinitionId;return o===n.dsRead.platform.editorApps.DATA_BINDING.appDefId?r?S.partial(b,C.DYNAMIC_PAGES.helpId):S.partial(b,C.DYNAMIC_PAGES.mobileHelpId):o===n.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId?S.partial(b,C.MEMBERS_PAGES.helpId):r?S.partial(b,C.ROUTER_PAGES.helpId):S.partial(b,C.ROUTER_PAGES.mobileHelpId)})),navigateTo:e((i=v,function(e,t,a){var n=a.editorAPI;return function(e){n.dsRead.pages.getFocusedPageId()!==e&&(n.pages.navigateTo(e),n.bi.event(R.events.pages.navigate_to_page,{page_id:e,panel_name:i,category:C.ROUTER_PAGES.biCategory}))}})),biEvent:function(){return e(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,a){var n;return(n=a.editorAPI.bi).event.apply(n,i)}}.apply(void 0,arguments))},dynamicPagesActions:e((n=s,g=h,m=_,f=o,function(e,t,a){var p=a.editorAPI;return D(p),N(p),S.reduce(n,function(e,t){var a=t.id,n=p.dsRead.pages.getReference(a),i=p.dsRead.routers.getRouterRef.byPage(n),s=p.dsRead.routers.get.byRef(i).appDefinitionId,o=p.dsRead.platform.getAppDataByAppDefId(s).applicationId,r=T.dynamicPage(p,a,o,i,g,m,f);return S.assign({},e,_defineProperty({},a,r))},{})})),onClickAdd:e((p=s,l=_,u=y,d=I,c=o,function(e,t,a){var n=a.editorAPI,i=n.dsRead.pages.getReference(p[0].id),s=n.dsRead.routers.getRouterRef.byPage(i),o=n.dsRead.routers.get.byRef(s).appDefinitionId,r=S.get(n.dsRead.platform.getAppDataByAppDefId(o),"applicationId");return k(n,o,r,l,u,d,s,c).onClick}))}},function(e,t,a){var n=S.assign({},e,{pages:S.map(e.pages,function(e){return S.assign({},e,{actions:t.dynamicPagesActions[e.id]})})}),i=S.omit(t,["dynamicPagesActions"]);return S.assign({},a,n,i)})(i(t))}),define("pages/panel/pagesView/editorAPIConnectors/appPagesView",["lodash","platform","util","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","pages/panel/pagesView/pagesView"],function(T,E,e,R,C,t){"use strict";var a=e.hoc,n=a.connect,i=a.renderWhenMutated,s=a.STORES.EDITOR_API,p=e.addPageRouterActionUtils,M=function(t,e,a,n,i,s){if(!n)return{title:null,onClick:null};var o=p.findAddPageAction(i);if(!o)return{title:null,onClick:null};var r=R.getOnClickApplicationNotification(t,a,o.event);return{title:o.title,onClick:function(e){t.bi.event(C.events.pages.pagesPanel.add_page_selection_click,{category:"application page",source:s||"router"}),r(e)}}};return n(s,function(e,t){var s,a,o,r,p,l,u,n,i,d,c=e.editorAPI,g=t.appData,m=g.id,f=g.title,P=g.pagesData,b=g.biCategory,y=g.emptyStateUrl,I=g.actions,h=t.onShowSettings,_=t.isDesktop,A=t.onRename,v=m,S=c.platform.getAppDataByAppDefId(v),C=M(c,0,S.applicationId,_,I,b);return{title:f,emptyStateUrl:y?(n=y,i=v,d=S,E.utils.getFullApplicationUrl(d,n,i,d.applicationId)):null,pages:(s=c,a=P,o=h,r=_,p=v,l=b,u=A,T.map(a,function(e){var t=e.id,a=e.title,n=e.permissionSymbol,i=e.pageDescriptor;return{id:t,title:a,permissionSymbol:n,typeSymbol:T.get(i,"icon","appsNewLight"),info:T.get(i,"tooltip"),actions:R.applicationPage(s,t,p,r,l,o,u)}})),renameEnabled:_,biCategory:b,appDefinitionId:v,titleAdd:C.title}},function(e,t){var i,s,o,r,p,l,u,d,c,g,m,f,a=t.appData,n=a.id,P=a.pagesData,b=a.helpId,y=a.biCategory,I=a.actions,h=t.onShowSettings,_=t.isDesktop,A=t.onHelp,v=t.biPanelName,S=t.onRename;return{onHelp:T.partial(A,b),navigateTo:e((m=v,f=y,function(e,t,a){var n=a.editorAPI;return function(e){n.dsRead.pages.getFocusedPageId()!==e&&(n.pages.navigateTo(e),n.bi.event(C.events.pages.navigate_to_page,{page_id:e,panel_name:m,category:f}))}})),biEvent:function(){e(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,a){var n;return(n=a.editorAPI.bi).event.apply(n,i)}}.apply(void 0,arguments))},onClickAdd:e((u=n,d=_,c=I,g=y,function(e,t,a){var n=a.editorAPI,i=n.platform.getAppDataByAppDefId(u);return M(n,0,i.applicationId,d,c,g).onClick})),extendedPagesActions:e((i=P,s=h,o=_,r=n,p=y,l=S,function(e,t,a){var n=a.editorAPI;return T.fromPairs(T.map(i,function(e){var t=e.id;return[t,R.applicationPage(n,t,r,o,p,s,l)]}))}))}})(i(t))}),define("pages/panel/pagesView/editorAPIConnectors/tpaView",["lodash","util","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView","coreBi","pages/utils/pageCategories"],function(m,e,f,t,P,u){"use strict";var a=e.hoc,n=a.connect,i=a.renderWhenMutated,s=a.STORES.EDITOR_API;return n(s,function(e,t){e.editorAPI;var a,s,n=t.tpa,i=n.pagesData,o=n.title,r=n.typeSymbol,p=n.biCategory,l=(t.onShowSettings,t.isDesktop);return{title:o,pages:(a=i,s=r,m.map(a,function(e){var t=e.id,a=e.title,n=e.isSubPage,i=e.permissionSymbol;return{id:t,title:a,info:e.info,typeSymbol:s,permissionSymbol:i,isSubPage:!!n}})),titleAdd:u.TPA_PAGES.titleAdd,renameEnabled:l,biCategory:p}},function(t,e){var i,s,a=e.tpa,n=a.helpId,o=a.mobileHelpId,r=a.onClickAdd,p=a.biCategory,l=e.onShowSettings,u=e.isDesktop,d=e.onHelp,c=e.biPanelName,g=t((i=l,s=u,function(e,t,a){var n=a.editorAPI;return{pageActions:f.tpaPage(n,i,s),subPageActions:f.tpaSubPage(n,i,s)}}));return{onHelp:u?m.partial(d,n):m.partial(d,o),onClickAdd:r,navigateTo:function(e){return t((i=c,s=p,o=e,function(e,t,a){var n=a.editorAPI;n.dsRead.pages.getFocusedPageId()!==o&&(n.pages.navigateTo(o),n.bi.event(P.events.pages.navigate_to_page,{page_id:o,panel_name:i,category:s}))}));var i,s,o},biEvent:function(){t(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,a){var n;return(n=a.editorAPI.bi).event.apply(n,i)}}.apply(void 0,arguments))},tpaPagesActions:g}},function(e,t,a){var n=t.tpaPagesActions,i=n.pageActions,s=n.subPageActions,o=m.assign({},e,{pages:m.map(e.pages,function(e){return m.omit(m.assign({},e,{actions:e.isSubPage?s:i}),["isSubPage"])})}),r=m.omit(t,["tpaPagesActions"]);return m.assign({},a,o,r)})(i(t))}),define("pages/panel/menuView/utils/mainMenuTreeState",["lodash"],function(a){"use strict";var n={};function i(e,t){n[e]=Boolean(t)}function s(e,t){return n.hasOwnProperty(e)?n[e]:t||!1}return{setMenuItemCollapsed:i,reflectStateToMenuTree:function t(e){a.forEach(e,function(e){e.isCollapsed=s(e.id),0<e.items.length?t(e.items):e.isCollapsed&&(e.isCollapsed=!1,i(e.id,!1))})},reflectStateToMenuItem:function(e,t){return e.isCollapsed=s(e.id,t),a.get(e,"items.length",0)<=0&&e.isCollapsed&&(e.isCollapsed=!1,i(e.id,!1)),e}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewUtils",["lodash"],function(n){"use strict";return{getMenuItemsWithInitialCollaptionData:function(e,t){return t&&n.forEach(e,function(e){e.isCollapsed=t[e.id]}),e},getMenuItemsWithsymbolIfApplicable:function(e,t,a){return t!==a?e:n.map(e,function(e){return n.defaults({symbol:"membersAction",items:n.map(e.items,function(e){return n.defaults({symbol:"membersAction"},e)})},e)})}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewActions",["lodash","constants","util","coreBi","platform","wixData","pages/panel/pagesView/editorAPIConnectors/getActions","experiment"],function(w,O,V,T,b,l,E,q){"use strict";var B=function(e,t,a,n){e.bi.event(T.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:n,category:a})};function s(e,t,a,n,i){var s,o,r,p,l,u=n[w.findIndex(n,{id:a.id})-1],d=u.items.length;s=e,o=t,r=a,p=u.id,l=d,w.forEachRight(r.items,function(e){s.menus.moveMenuItem(o,e.id,p,l,!1)}),e.menus.moveMenuItem(t,a.id,u.id,d,!1),e.bi.event(T.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"quick actions",source:i}),e.history.add("subpaging a page")}var R=function(e,t,a,n,i){var s={};"boolean"==typeof n?s.hidePage=n:n=!a.isVisible,"boolean"==typeof i?s.mobileHidePage=i:i=!a.isVisibleMobile,a.pageData?e.pages.data.update(a.pageData.id,s):e.dsActions.menu.updateItem(t,a.id,{isVisible:!n,isVisibleMobile:!i}),e.history.add("hiding a page")},U=function(t,a,e,n,i){n.isVisible?e.push({title:V.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){R(t,a,n,!0);var e=w.get(n,"pageData.id");B(t,e,"hide",i)}}):e.push({title:V.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){R(t,a,n,!1);var e=w.get(n,"pageData.id");B(t,e,"show",i)}})},L=function(r,p,e,l,t,u){var a,n,i;i=0===(n=l).position,n.parent||i?(a=l,w.isObject(a.parent)&&e.push({title:V.translate("Pages_Actions_Page_MoveUp"),symbolName:"unsubpageAction",onClick:function(){var e,t,a,n,i,s;e=r,t=p,n=u,i=(a=l).parent.parent&&a.parent.parent.id,s=a.parent.position+1,e.menus.moveMenuItem(t,a.id,i,s,!1),e.bi.event(T.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"quick actions",source:n}),e.history.add("moving a page out of its parent");var o=w.get(l,"pageData.id");B(r,o,"mainpage",u)}})):e.push({title:V.translate("Pages_Actions_Page_Subpage"),symbolName:"subpageAction",onClick:function(){s(r,p,l,t,u);var e=w.get(l,"pageData.id");B(r,e,"subpage",u)}})},x=function(i,e,t,s,o){var a,n,r,p;s.type.isPage&&((p=i).developerMode.isEnabled()||l.isDataModeOn(p))&&(a=i,(r=(n=s).pageData&&n.pageData.id)&&a.dsRead.routers.pages.isConnectablePage(r))&&t.push({title:V.translate("Platform_Page_Actions_Set_Dynamic_Page"),symbolName:"dynamicPageType",onClick:function(){var e,t,a;e=i,t=s.pageData.id,a=e.dsRead.platform.getAppDataByAppDefId(e.dsRead.platform.editorApps.DATA_BINDING.appDefId),e.dsActions.platform.notifyApplication(a.applicationId,{eventType:"addDynamicPageClicked",eventPayload:{pageRef:e.dsRead.pages.getReference(t),origin:"quickActionsMenu"}});var n=w.get(s,"pageData.id");B(i,n,"Set Page Dynamic",o)}})},M=function(e,t,a,n,i,s,o,r,p,l){var u,d,c,g,m,f,P,b,y,I,h,_,A,v,S,C,T,E,R,M,k,D,N=[];return function(t,e,a,n,i,s){if(a.type.isPage&&n){var o=void 0,r=void 0;o=q.isOpen("promoteSEOTab")?(e.unshift({title:V.translate(O.PAGE_SETTINGS_TABS.TITLE_KEYS.SOCIAL),symbolName:"seoSocialShareAction",onClick:function(){i({tabType:O.PAGE_SETTINGS_TABS.SOCIAL_NEW,pageId:a.pageData.id});var e=w.get(a,"pageData.id");B(t,e,"tabPageInfo",s)},isSettings:!0}),V.translate(O.PAGE_SETTINGS_TABS.TITLE_KEYS.BASIC_SEO)):V.translate("Pages_Actions_Page_SEO_Social"),r=O.PAGE_SETTINGS_TABS.SEO,e.unshift({title:V.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(){i({tabType:O.PAGE_SETTINGS_TABS.PAGE_INFO,pageId:a.pageData.id});var e=w.get(a,"pageData.id");B(t,e,"tabPageInfo",s)},isSettings:!0},{title:o,symbolName:"seoSettingsAction",onClick:function(){i({tabType:r,pageId:a.pageData.id});var e=w.get(a,"pageData.id");B(t,e,"tabSEO",s)},isSettings:!0})}}(e,N,a,n,i,l),u=e,d=t.id,c=N,m=l,(g=a).type.isLink&&c.push({title:V.translate("Pages_Actions_Link_Change"),symbolName:"linkAction",onClick:function(){u.menus.updateLink(d,g,g.link),B(u,null,"change link",m)}}),f=e,P=t.id,b=a,y=o,I=l,N.push({title:V.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){var a,n,i,s;b.pageData?f.menus.renamePage(b.pageData.id,b.pageData.title,t):(a=f,n=P,i=b,(s=t)&&i.label!==s&&(a.menu.updateItem(n,i.id,{label:s}),a.history.debouncedAdd("Rename Menu Item")));var o=w.get(b,"pageData.id");B(f,o,"rename",I),y()},isRename:!0}),h=e,_=t.id,A=N,v=a,S=s,C=l,h.menus.canDuplicate(v)&&!h.dsRead.language.isCurrentLanguageSecondary()&&A.push({title:V.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(){h.menus.duplicateMenuItem(_,v,S);var e=w.get(v,"pageData.id");B(h,e,"duplicate",C)}}),x(e,t.id,N,a,l),U(e,t.id,N,a,l),L(e,t,N,a,r,l),T=e,E=t.id,R=N,M=a,k=l,!(D=p)&&M.type.isPage||R.push({title:V.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(){T.menus.removeMenuItem(E,M,D);var e=w.get(M,"pageData.id");B(T,e,"delete",k)}}),N},k=function(e,t,a,n,i,s,o){var r,p,l,u,d,c,g,m,f,P=function(a,e,n,t,i,s){if(t){var o=a.dsRead.platform.getAppDataByApplicationId(e.appId).appDefinitionId,r=a.pages.dynamicPages.getActionByAppDefId(o,"pageSettings",[b.constants.pages.page_settings.pageInfo.type,b.constants.pages.page_settings.seo.type]);return w.map(r,function(t){return{title:t.title,symbolName:t.icon,onClick:function(){var e=w.get(n,"pageData.id");i({pageId:e,routerId:w.get(n,"link.routerId"),innerRoute:w.get(n,"link.innerRoute"),tabType:t.type}),B(a,e,t.type,s)},isSettings:!0}})}return[]}(e,t,a,n,i,o);return r=e,p=t,l=a,u=i,d=P,c=o,g=w.get(l,"pageData.id"),m=r.dsRead.platform.getAppDataByApplicationId(p.appId).appDefinitionId,(f=r.pages.dynamicPages.getActionByAppDefId(m,"pageSettings",[b.constants.pages.page_settings.pageInfo.type])[0])&&(l.isVisible?d.push({title:V.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){u({tabType:f.type,pageId:g,routerId:w.get(l,"link.routerId"),innerRoute:w.get(l,"link.innerRoute")}),B(r,g,"hide",c)}}):d.push({title:V.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){u({tabType:f.type,pageId:g,routerId:w.get(l,"link.routerId"),innerRoute:w.get(l,"link.innerRoute")}),B(r,g,"hide",c)}}),d.push({title:V.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(){u({tabType:f.type,pageId:g,routerId:w.get(l,"link.routerId"),innerRoute:w.get(l,"link.innerRoute")}),B(r,g,"rename",c)}})),L(e,t,P,a,s,o),P};return{getActionsForMenuItem:function(e,t,a,n,i,s,o,r,p,l){return t.appId?n?k(e,t,a,n,i,r,l):null:n?w.get(a,["pageData","managingAppDefId"])?(m=e,f=t,b=r,y=i,I=o,h=l,_=(P=a).pageData.id,A=P.pageData.managingAppDefId,v=E.applicationPage(m,_,A,!0,h,y,I),S=w.remove(v,{isRemove:!0}),C=_slicedToArray(S,1)[0],U(m,f.id,v,P,h),L(m,f,v,P,b,h),C&&v.push(C),v):M(e,t,a,n,i,s,o,r,p,l):(u=e,d=t.id,g=l,(c=a).isVisibleMobile?[{title:V.translate("MenuItem_Hide_Mobile_Action"),symbolName:"quickActionsHide",onClick:function(){R(u,d,c,void 0,!0);var e=w.get(c,"pageData.id");u.bi.event(T.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:e,source:g,category:"hide"})}}]:[{title:V.translate("MenuItem_Show_Mobile_Action"),symbolName:"quickActionsShow",onClick:function(){R(u,d,c,void 0,!1);var e=w.get(c,"pageData.id");u.bi.event(T.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:e,source:g,category:"show"})}}]);var u,d,c,g,m,f,P,b,y,I,h,_,A,v,S,C}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewMapper",["lodash","pages/panel/menuView/editorAPIConnectors/menuViewUtils","pages/panel/menuView/editorAPIConnectors/menuViewActions","pages/panel/menuView/utils/menuDataGetterUtil","pages/utils/pageCategories","coreBi","stateManagement","constants"],function(k,D,N,w,O,V,q,B){"use strict";var U=function(e){return q.editorPlugins.userPreferences.selectors.getSessionUserPreferences("collapsedMenuItems")(e.store.getState())},L=function(e,t,a){return a.editorAPI};return{mapStateToProps:function(e,t){var a=e.editorAPI,n=t.isDesktop,i=t.menu,s=a.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,o=D.getMenuItemsWithInitialCollaptionData(i.menuItems,U(a)),r=D.getMenuItemsWithsymbolIfApplicable(o,i.appDefId,s),p=O.MENUS.getBiCategory(i.id);return{title:i.title,menuItems:r,isDraggable:n,renameEnabled:n,isMobile:!n,initialActions:!n&&i.appDefId?null:[],showAddOptions:n&&i.appDefId!==a.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,biCategory:p,titleAdd:O.MENUS.titleAdd,getTooManyPagesFrequencyCount:q.editorPlugins.userPreferences.selectors.getSessionUserPreferences(B.USER_PREFS.TOO_MANY_PAGES.FREQUENCY_COUNT)(a.store.getState())||0}},mapDispatchToProps:function(t,e){var a,n,i,s,o,r,p,l,u,d,c,g,m,f,P,b=e.onShowSettings,y=e.onItemAdded,I=e.onRename,h=e.isDesktop,_=e.onHelp,A=e.menu,v=e.selectedMenuItemId,S=e.biPanelName,C=t(L),T=C.dsRead.menu.getById(A.id,!0),E=C.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,R=D.getMenuItemsWithInitialCollaptionData(A.menuItems,U(C)),M=O.MENUS.getBiCategory(A.id);return{biEvent:C.bi.event,onMoveMenuItem:function(e,t,a,n){return C.menus.moveMenuItem(T,e,t,a,!0,n)},navigateCallback:function(e){if(e.type.isPage)m=C,f=e.pageData.id,P=M,b=S,m.dsRead.pages.getFocusedPageId()!==f&&(m.pages.navigateTo(f),m.bi.event(V.events.pages.navigate_to_page,{page_id:f,category:P,panel_name:b}));else if(e.type.isLink&&"AnchorLink"===e.type.raw){var t=e.link,a=t.pageId&&t.pageId.replace("#","");l=C,u=a,d=M,c=S,g=t.anchorDataId,(l.dsRead.pages.getFocusedPageId()!==u||g)&&(l.pages.navigateToAndScroll(u,g,l.applyPreviewScrollToEditorScroll),l.bi.event(V.events.pages.navigate_to_page,{page_id:u,category:d,panel_name:c}))}else e.type.isLink&&"DynamicPageLink"===e.type.raw&&(n=C,i=e.link.routerId,s=e.link.innerRoute,o=M,r=S,p=k.assign(n.dsRead.data.createItem("DynamicPageLink"),{innerRoute:s||"",routerId:i}),n.pages.navigateTo(p),n.bi.event(V.events.pages.navigate_to_page,{category:o,panel_name:r}));var n,i,s,o,r,p,l,u,d,c,g,m,f,P,b},titleAdd:O.MENUS.titleAdd,onHelpHeader:k.partial(_,w.getHelpIdForMenu(A.id,A.appDefId,E,h)),onHelp:_,onClickAddPage:(c=C,g=M,m=A.id,f=v,P=y,function(){c.menus.addPage(m,f,P),c.bi.event(V.events.pages.pagesPanel.add_page_selection_click,{category:"page",source:g})}),onClickAddLink:(r=C,p=M,l=A.id,u=v,d=y,function(){r.menus.addLink(l,u,d),r.bi.event(V.events.pages.pagesPanel.add_page_selection_click,{category:"link",source:p})}),onClickAddFolder:(a=C,n=M,i=A.id,s=v,o=y,function(){a.menus.addFolder(i,s,o),a.bi.event(V.events.pages.pagesPanel.add_page_selection_click,{category:"dropdown menu",source:n})}),setInPrefIscollapsedMenuItems:function(e,t){return n=e,i=t,(s=U(a=C))||(a.store.dispatch(q.editorPlugins.userPreferences.actions.setSessionUserPreferences("collapsedMenuItems",{})),s={}),s[n]=Boolean(i),void a.store.dispatch(q.editorPlugins.userPreferences.actions.setSessionUserPreferences("collapsedMenuItems",s));var a,n,i,s},getMenuItemActions:function(e){return N.getActionsForMenuItem(C,T,e,h,b,y,I,R,A.multiPageMenu,M)},setTooManyPagesFrequencyCount:function(e){return C.store.dispatch(q.editorPlugins.userPreferences.actions.setSessionUserPreferences(B.USER_PREFS.TOO_MANY_PAGES.FREQUENCY_COUNT,e))},showUserActionNotification:function(){var e;return t((e=q.editorPlugins.notifications.actions).showUserActionNotification.apply(e,arguments))}}}}}),define("pages/panel/menuView/addTooltip.rt",["react","lodash","util","baseUILib"],function(a,e,n,i){"use strict";return function(e,t){return a.createElement("div",{className:"add-tooltip-pp",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(i.Composites.RichTextLabeled,{},a.createElement(i.TextLabel,{type:"T06",value:e.title}),a.createElement(i.RichText,{},a.createElement("p",{},n.translate(e.description),"\n            ",a.createElement("a",{onClick:e.onLearnMore},n.translate("NewPages_Panel_Add_Folder_Learnmore"))))))}}),define("pages/panel/menuView/addTooltip",["lodash","prop-types","pages/panel/menuView/addTooltip.rt"],function(e,t,a){"use strict";var n=a;return n.displayName="addTooltip",n.propTypes={title:t.string,description:t.string,onLearnMore:t.func,onMouseEnter:t.func,onMouseLeave:t.func},n}),define("pages/panel/menuView/menuItem/menuItem.rt",["react","lodash","baseUI","santa-editor-symbols","baseUILib","util","core","experiment"],function(s,n,e,o,r,a,t,i){"use strict";return function(){function t(e){var t=this.filterRegularActions(),a=this.filterSettingsActions();return s.createElement(r.ContextMenu,{className:"flat",isOpen:this.state.contextMenuOpened,key:"page-context-menu",onToggle:this.handleContextMenuToggle,automationId:"menu-item-context-menu"},s.createElement.apply(this,[r.ContextMenuContent,{key:"actions-"+this.state.actions.length},n.map(a,function(e,t,a,n,i){return s.createElement(r.ContextMenuAction,{onClick:function(e,t,a,n,i){this.handleClickAction(n)}.bind(this,e,t,a,n,i),key:"action-"+n.title,automationId:"action-"+n.title,className:"menu-item-settings-action-pp"},s.createElement(o.symbol,{name:n.symbolName}),s.createElement("span",{},n.title))}.bind(this,e,t,a)),n.isEmpty(t)||n.isEmpty(a)?null:s.createElement(r.Divider,{key:"actions-divider"}),n.map(t,function(e,t,a,n,i){return s.createElement(r.ContextMenuAction,{onClick:function(e,t,a,n,i){this.handleClickAction(n)}.bind(this,e,t,a,n,i),key:"action-"+n.title,automationId:"action-"+n.title},s.createElement(o.symbol,{name:n.symbolName}),s.createElement("span",{},n.title))}.bind(this,e,t,a))]))}return s.createElement("div",{className:"menu-item-pp "+n(this.getTopLevelClasses()).transform(function(e,t,a){t&&e.push(a)},[]).join(" "),onClick:this.props.setSelected,"data-aitemtype":this.getAutomationItemType()},null===this.state.inputValue?s.createElement("div",{className:"title-action-container",key:"pageInfo",onDoubleClick:this.onDoubleClick},s.createElement("div",{className:"left-container"},this.props.isDragAvailable?s.createElement(o.symbol,{name:"dragPage",key:"drag-icon",className:"page-item-drag",dataHintMyData:"hint_my_data"}):null,s.createElement(r.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},s.createElement(o.symbol,{name:this.getTypeSymbolName()})),s.createElement("span",{className:n(this.getTitleClass()).transform(function(e,t,a){t&&e.push(a)},[]).join(" ")},s.createElement(r.TooltipOnEllipsis,{marginTop:5,contentClassName:"menu-item-title-name"},this.props.dataSource.label))),function(){var e=this.getPagePermissionSymbol();return s.createElement("div",{className:"right-container"},e?s.createElement(o.symbol,{name:e,key:"pagePermissionSymbol"}):null,this.isHidden()?s.createElement(o.symbol,{name:"hiddenPageStatus",key:"hiddenPageStatus-symbol"}):null,this.state.actions?t.apply(this,[e]):null)}.apply(this,[])):null,null!==this.state.inputValue?function(){var e=a.validate.pageNameValidator(this.state.inputValue);return s.createElement("div",{className:"input-button-container",onMouseDown:function(e,t){t.stopPropagation()}.bind(this,e),key:"input-container-page-pp"},s.createElement(r.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!e,invalidMessage:e,shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleRenameDone,autoSelect:!0}),s.createElement(r.Button,{className:"done-button",disabled:e},"\n            ",a.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/menuView/menuItem/menuItem",["lodash","react","prop-types","pages/panel/menuView/menuItem/menuItem.rt","coreBi","util"],function(s,a,e,n,o,r){"use strict";var t=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state={actions:i.props.initialActions,contextMenuOpened:!1,inputValue:function(){if(!(i.props.dataSource.id===i.props.renamedMenuItemId)||!i.props.renameEnabled)return null;var e=i.props.getMenuItemActions(i.props.dataSource);return s.head(s.filter(e,"isRename"))?i.props.dataSource.label:null}()},i.handleClickAction=function(e){e.isRename?i.openRenameMode():e.onClick(i.props.dataSource.id,i.props.dataSource.label)},i.openRenameMode=function(){i.getRenameAction()&&i.props.renameEnabled&&i.setState({inputValue:i.props.dataSource.label})},i.handleChangeInput=function(e){return i.setState({inputValue:e})},i.handleRenameDone=function(){var e=!r.validate.pageNameValidator(i.state.inputValue)?i.state.inputValue:i.props.dataSource.label;i.getRenameAction().onClick(i.props.dataSource.id,e),i.props.setSelected(),i.setState({inputValue:null,contextMenuOpened:!1})},i.getRenameAction=function(){var e=i.state.actions;return s.isEmpty(e)&&(e=i.props.getMenuItemActions(i.props.dataSource)),s.head(s.filter(e,"isRename"))},i.onDoubleClick=function(){return i.openRenameMode()},i.handleContextMenuToggle=function(e){e?(i.setState({contextMenuOpened:!0,actions:i.getActionsForItem(i.props.dataSource)}),i.props.biEvent(o.events.pages.pagesPanel.page_actions_click,{page_id:s.get(i.props.dataSource,"pageData.id"),source:i.props.biCategory})):i.setState({contextMenuOpened:!1})},i.getActionsForItem=function(e){return i.props.getMenuItemActions(e)},i.isHidden=function(){return i.props.isMobile?!i.props.dataSource.isVisibleMobile:!i.props.dataSource.isVisible},i.getAutomationItemType=function(){var e=i.props.dataSource,t=e.parent?"subpage-":"";return e.isHomePage?t+"home":e.type.isPage?t+"page":e.type.isLink?t+"link":e.type.isDropdown?t+"folder":void 0},i.getTopLevelClasses=function(){return{"hidden-page":i.isHidden(),selected:i.props.isSelected}},i.getPagePermissionSymbol=function(){return s.get(i.props.dataSource,"pageData.pageSecurity.requireLogin")?"membersPagePermission":s.get(i.props.dataSource,"pageData.pageSecurity.dialogLanguage")?"passwordPagePermission":null},i.getTitleClass=function(){var e=!!i.getPagePermissionSymbol(),t=!!i.isHidden(),a=!!i.props.dataSource.parent;return{"menu-item-title":!0,"page-without-attributes":!a&&!e&&!t,"subpage-without-attributes":a&&!e&&!t,"page-with-attribute":!a&&e&&!t||!a&&!e&&t,"subpage-with-attribute":a&&e&&!t||a&&!e&&t,"page-with-attributes":!a&&e&&t,"subpage-with-attributes":a&&e&&t}},i.filterSettingsActions=function(){return s.filter(i.state.actions,"isSettings")},i.filterRegularActions=function(){return s.reject(i.state.actions,"isSettings")},i.getTypeSymbolName=function(){var e,t,a,n=i.props.dataSource;return n.symbol?n.symbol:n.type.isPopupLink?"popupPageType":n.type.isLink?(e=s.get(n,"link.type"),s.get({AnchorLink:"anchorPageType",ExternalLink:"urlPageType",EmailLink:"emailPageType",PhoneLink:"phonePageType",DocumentLink:"documentPageType"},e,"linkPageType")):n.type.isDropdown?"folderPageType":n.isHomePage?"homePageType":n.isOldBlog?"oldBlogPageType":"members"===s.get(n,"pageData.tpaPageId")?"membersAction":0<s.get(n,"pageData.tpaApplicationId")?(t=n.appDefinitionId,s.get((_defineProperty(a={},"1380b703-ce81-ff05-f115-39571d94dfcd","storesPageType"),_defineProperty(a,"13d21c63-b5ec-5912-8397-c3a5ddb27a97","bookingPageType"),_defineProperty(a,"14724f35-6794-cd1a-0244-25fd138f9242","forumPageType"),_defineProperty(a,"14bcded7-0066-7c35-14d7-466cb3f09103","blogPageType"),_defineProperty(a,"135aad86-9125-6074-7346-29dc6a3c9bcf","hotelsPageType"),_defineProperty(a,"13c1402c-27f2-d4ab-7463-ee7c89e07578","restaurantsPageType"),_defineProperty(a,"13e8d036-5516-6104-b456-c8466db39542","restaurantsPageType"),_defineProperty(a,"1484cb44-49cd-5b39-9681-75188ab429de","searchPageType"),a),t,"tpaPageType")):"regularPageType"},i}return _inherits(t,a.Component),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.dataSource,a=e.renamedMenuItemId,n=null!==this.state.inputValue;t.id!==a||n||this.openRenameMode()}},{key:"render",value:function(){return n.call(this)}}]),t}();return t.displayName="MenuItem",t.propTypes={renamedMenuItemId:e.string,dataSource:e.object.isRequired,isSelected:e.bool,setSelected:e.func.isRequired,isDragAvailable:e.bool.isRequired,isMobile:e.bool.isRequired,info:e.string,getMenuItemActions:e.func.isRequired,renameEnabled:e.bool,biEvent:e.func.isRequired,biCategory:e.string.isRequired,initialActions:e.oneOfType([e.array,e.object])},t}),define("pages/panel/menuView/menuView.rt",["react","lodash","baseUI","baseUILib","pages/panel/menuView/menuItem/menuItem","pages/panel/menuView/addTooltip","santa-editor-symbols"],function(e,t,a,n,i,s,o){"use strict";return function(){return e.createElement("div",{className:"menu-view-pp"},e.createElement(n.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelpHeader,className:"header light"},e.createElement("span",{className:"title-menu-view-pp"},this.props.title)),e.createElement("div",{className:t({"pages-tree-container":!0,"disable-drag":!this.props.isDraggable,"with-footer":this.props.showAddOptions}).transform(function(e,t,a){t&&e.push(a)},[]).join(" ")},e.createElement(a.treeDocker,{className:t({"pages-tree-docker":!0,"pages-tree-shrinked":this.isShrink()}).transform(function(e,t,a){t&&e.push(a)},[]).join(" "),onNodeMoved:this.handleMovePage,treeClass:"pages-tree",treeNodeClass:"pages-tree-node",treeNodeLabelClass:"menu-item-pp",draggedClass:"rotated",previewClass:"shadow",isDragAvailable:this.props.isDraggable,scrollTopGetter:this.getScrollTop,collapsedClass:"tree-collapsed"},e.createElement(n.CustomScroll,{ref:"customScroll"},e.createElement(a.treeView,{nodeContent:i,structureType:"tree",isDragAvailable:this.props.isDraggable,isMobile:this.props.isMobile,className:"pages-tree",dataSource:this.props.menuItems,collapsedSelector:"isCollapsed",onNodeToggled:this.onMenuItemToggled,isRoot:!0,onChange:this.handleSelectedItem,initialActions:this.props.initialActions,equalityComparer:this.equalityComparer,value:this.state.selectedMenuItemId,getMenuItemActions:this.props.getMenuItemActions,renameEnabled:this.props.renameEnabled,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renamedMenuItemId:this.props.renamedItemId})))),this.props.showAddOptions?e.createElement("footer",{key:"add-container"},e.createElement("div",{className:"add-options-container"},e.createElement("div",{className:"add-menu-page-button-container",onMouseEnter:this.handleMouseEnterAddPage,onMouseLeave:this.handleMouseLeaveAddPageButton},e.createElement(n.Tooltip,{arrowAlignment:"top",isOpen:this.isTooManyPagesTooltipOpen(),openOnMouseEnter:!1,content:this.getAddPageTooltipContent(),key:"tooltip-add-page"},e.createElement(n.Button,{className:"add-menu-page-button",onClick:this.addPage,automationId:"add-menu-page-button"},e.createElement(o.symbol,{name:"addPage"}),e.createElement("span",{className:"add-title"},this.props.titleAdd)))),e.createElement("div",{className:"add-menu-link-button-container",onMouseEnter:this.handleMouseEnterAddLink,onMouseLeave:this.handleMouseLeaveAddLinkButton},e.createElement(n.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddLinkHovered,content:this.getAddLinkTooltipContent(),key:"tooltip-add-link"},e.createElement(n.Button,{onClick:this.props.onClickAddLink,automationId:"add-menu-link-button"},e.createElement(o.symbol,{name:"addLink"})))),e.createElement("div",{className:"add-menu-folder-button-container",onMouseEnter:this.handleMouseEnterAddFolder,onMouseLeave:this.handleMouseLeaveAddFolderButton},e.createElement(n.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddFolderHovered,content:this.getAddFolderTooltipContent(),key:"tooltip-add-folder"},e.createElement(n.Button,{onClick:this.props.onClickAddFolder,automationId:"add-menu-folder-button"},e.createElement(o.symbol,{name:"addFolder"})))))):null)}}),define("pages/panel/menuView/menuView",["react","prop-types","reactDOM","lodash","util","pages/panel/menuView/utils/mainMenuTreeState","pages/panel/menuView/editorAPIConnectors/menuViewMapper","pages/panel/menuView/addTooltip","coreBi","experiment","pages/panel/menuView/menuView.rt","helpIds"],function(a,e,o,n,t,p,i,s,l,u,r,d){"use strict";var c=t.hoc,g=c.connect,m=c.renderWhenMutated,f=c.STORES.EDITOR_API,P=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={selectedMenuItemId:r.props.selectedMenuItemId,isAddLinkHovered:!1,isAddFolderHovered:!1,isAddPageHovered:!1},r.scrollToSelectedNode=!1,r.componentWillReceiveProps=function(e){e.selectedMenuItemId&&r.props.selectedMenuItemId!==e.selectedMenuItemId&&r.setState({selectedMenuItemId:e.selectedMenuItemId}),e.renamedItemId&&r.setState({selectedMenuItemId:e.renamedItemId})},r.componentDidUpdate=function(){r.doScrollToSelectedNode()},r.componentDidMount=function(){r.scrollToSelectedNode=!0,r.doScrollToSelectedNode()},r.isShrink=function(){return 17<function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return n.reduce(e,function(e,t){return e+1+(t.isCollapsed?0:a(t.items))},0)}(r.props.menuItems)},r.getScrollTop=function(){return r.refs.customScroll.getScrollTop()},r.handleMovePage=function(e){var t={items:r.props.menuItems},a=e.from.findIn(t,"items"),n=a.id;if(n){var i=e.to.parent().findIn(t,"items").id||null,s=e.to.findIn(t,"items"),o=s?s.position:e.to.atRight();i&&p.setMenuItemCollapsed(i,!1),r.props.onMoveMenuItem(n,i,o,function(){i&&(r.scrollToSelectedNode=!0),r.handleSelectedItem(a)}),r.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_drag,{source:r.props.biCategory}),i&&1===e.from.length()?r.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"drag",source:r.props.biCategory}):!i&&1<e.from.length()&&r.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"drag",source:r.props.biCategory})}},r.onMenuItemToggled=function(e,t){var a=e.props.dataSource.id;r.props.setInPrefIscollapsedMenuItems(a,t)},r.handleSelectedItem=function(e){e.type.isDropdown||e.type.isLink?r.props.onSelectNonPageItem():e.type.isPage&&r.props.onSelectPageItem(e.pageData.id),r.setState({selectedMenuItemId:e.id}),r.props.navigateCallback(e)},r.equalityComparer=function(e,t){return e.id===t},r.doScrollToSelectedNode=function(){var e=void 0,t=void 0,a=NaN;if(r.scrollToSelectedNode){r.scrollToSelectedNode=!1;var n=o.findDOMNode(r),i=n.querySelector(".pages-tree-container"),s=n.querySelector(".menu-item-pp.selected");s&&(e=i.getBoundingClientRect(),(t=s.getBoundingClientRect()).top<e.top?a=r.getScrollTop()+(t.top-e.top):t.bottom>e.bottom&&(a=r.getScrollTop()+(t.bottom-e.bottom)),isNaN(a)||r.refs.customScroll.updateScrollPosition(Math.max(0,a)))}},r.clearTimeout=function(){return r.props.timeoutHandler.clearTimeout(r.tooltipTimeout)},r.getAddLinkTooltipContent=function(){return a.createElement(s,{title:"NewPages_Panel_Add_Link_Title",description:"NewPages_Panel_Add_Link_Text",onLearnMore:function(){r.props.onHelp("79f9b88c-f080-4acc-8195-d62d34583dc6"),r.clearTimeout(),r.setState({isAddLinkHovered:!1})},onMouseEnter:r.handleMouseEnterAddLink,onMouseLeave:function(){r.clearTimeout(),r.setState({isAddLinkHovered:!1})}})},r.getAddFolderTooltipContent=function(){return a.createElement(s,{title:"NewPages_Panel_Add_Folder_Title",description:"NewPages_Panel_Add_Folder_Text",onLearnMore:function(){r.props.onHelp("c29d5e56-186e-47c6-903a-7ee7908fc078"),r.clearTimeout(),r.setState({isAddFolderHovered:!1})},onMouseEnter:r.handleMouseEnterAddFolder,onMouseLeave:function(){r.clearTimeout(),r.setState({isAddFolderHovered:!1})}})},r.getAddPageTooltipContent=function(){return a.createElement(s,{title:"Add_Page_TooManyPages_Tooltip_Title",description:"Add_Page_TooManyPages_Tooltip_Text",onLearnMore:function(){r.props.onHelp("244dfae4-bd5c-4672-85ba-28938f4cb07f"),r.clearTimeout(),r.setState({isAddPageHovered:!1})},onMouseEnter:r.handleMouseEnterAddPage,onMouseLeave:function(){r.clearTimeout(),r.setState({isAddPageHovered:!1})}})},r.handleMouseEnterAddLink=function(){r.clearTimeout(),r.setState({isAddLinkHovered:!0,isAddFolderHovered:!1,isAddPageHovered:!1})},r.handleMouseLeaveAddLinkButton=function(){r.clearTimeout(),r.tooltipTimeout=r.props.timeoutHandler.setTimeout(function(){r.setState({isAddLinkHovered:!1})},700)},r.handleMouseEnterAddFolder=function(){r.clearTimeout(),r.setState({isAddFolderHovered:!0,isAddLinkHovered:!1,isAddPageHovered:!1})},r.handleMouseLeaveAddFolderButton=function(){r.clearTimeout(),r.tooltipTimeout=r.props.timeoutHandler.setTimeout(function(){r.setState({isAddFolderHovered:!1})},700)},r.handleMouseEnterAddPage=function(){r.clearTimeout(),r.setState({isAddPageHovered:!0,isAddLinkHovered:!1,isAddFolderHovered:!1})},r.handleMouseLeaveAddPageButton=function(){r.clearTimeout(),r.tooltipTimeout=r.props.timeoutHandler.setTimeout(function(){r.setState({isAddPageHovered:!1})},700)},r.siteHasTooManyPages=function(){return 50<r.props.menuItems.length},r.isTooManyPagesTooltipOpen=function(){return r.siteHasTooManyPages()&&r.state.isAddPageHovered},r.addPage=function(){if(r.props.onClickAddPage(),r.siteHasTooManyPages()&&"old"!==u.getValue("se_notificationCenter")){if(r.props.getTooManyPagesFrequencyCount%4==0){r.props.showUserActionNotification({message:"Notifications_Too_Many_Pages_Text",title:"Notifications_Too_Many_Pages_Text",type:"warning",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){r.props.onHelp(d.NOTIFICATIONS.TOO_MANY_PAGES)}}})}r.props.setTooManyPagesFrequencyCount(r.props.getTooManyPagesFrequencyCount+1)}},r}return _inherits(t,a.Component),_createClass(t,[{key:"render",value:function(){return r.call(this)}}]),t}();P.displayName="MenuView",P.propTypes={selectedMenuItemId:e.string,setInPrefIscollapsedMenuItems:e.func.isRequired,navigateCallback:e.func.isRequired,isDraggable:e.bool.isRequired,isMobile:e.bool.isRequired,onMoveMenuItem:e.func.isRequired,menuItems:e.arrayOf(e.object).isRequired,title:e.string.isRequired,onClose:e.func.isRequired,onHelp:e.func.isRequired,onHelpHeader:e.func.isRequired,getMenuItemActions:e.func.isRequired,renamedItemId:e.string,initialActions:e.oneOfType([e.array,e.object]),renameEnabled:e.bool.isRequired,showAddOptions:e.bool.isRequired,onClickAddPage:e.func.isRequired,onClickAddLink:e.func.isRequired,onClickAddFolder:e.func.isRequired,titleAdd:e.string.isRequired,onSelectNonPageItem:e.func.isRequired,onSelectPageItem:e.func.isRequired,biEvent:e.func.isRequired,biCategory:e.string.isRequired,showUserActionNotification:e.func,timeoutHandler:e.object,setTooManyPagesFrequencyCount:e.func,getTooManyPagesFrequencyCount:e.number},P.defaultProps={timeoutHandler:window};var b=g(f,i.mapStateToProps,i.mapDispatchToProps)(m(P));return b.pure=P,b}),define("pages/panel/transitionsView/transitionsView.rt",["react","lodash","util","baseUILib","santa-editor-symbols"],function(e,t,a,n,i){"use strict";return function(){return e.createElement("div",{className:"transitions-view-pp"},e.createElement(n.PanelHeader,{onClose:this.props.onClose,onHelp:function(){this.props.onHelp("000c9232-9321-4738-94c8-885f8633b35b")}.bind(this),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement(n.Composites.Thumbnails,{},e.createElement(n.Thumbnails,{value:this.props.selectedTransition,onChange:this.props.onClickTransition,maxThumbsPerRow:3,options:this.getTransitions()})))}}),define("pages/panel/transitionsView/transitionsView",["lodash","react","prop-types","santa-editor-symbols","pages/panel/transitionsView/transitionsView.rt"],function(e,t,a,n,i){"use strict";var s=function(e){return t.createElement(n.symbol,{name:e})},o=[{value:"none",label:"Pages_Menu_Transitions_None",illustration:s("transition-none")},{value:"swipeHorizontalFullScreen",label:"Pages_Menu_Transitions_SwipeH_Selected",illustration:s("transition-pages-horizontal")},{value:"swipeVerticalFullScreen",label:"Pages_Menu_Transitions_SwipeV_Popup",illustration:s("transition-pages-vertical")},{value:"crossfade",label:"Pages_Menu_Transitions_CrossFade",illustration:s("transition-pages-crossfade")},{value:"outIn",label:"Pages_Menu_Transitions_OutIn",illustration:s("transition-pages-inout")}],r=function(e){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.getTransitions=function(){return o},t}return _inherits(a,t.Component),_createClass(a,[{key:"render",value:function(){return i.call(this)}}]),a}();return r.displayName="TransitionsView",r.propTypes={onClickTransition:a.func.isRequired,title:a.string.isRequired,onClose:a.func.isRequired,onHelp:a.func.isRequired,selectedTransition:a.string.isRequired},r}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt",["react","lodash","util","baseUILib","pages/utils/pageCategories"],function(e,t,a,n,i){"use strict";return function(){return e.createElement("div",{className:"dynamic-pages-intro-view-pp"},e.createElement(n.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp.bind(null,i.DYNAMIC_PAGES_INTRO.helpId),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement("img",{className:"banner",src:a.media.getMediaUrl("panels/pages/add_dynamic_pages_intro.png")}),e.createElement(n.Composites.RichTextLabeled,{className:"composite-centered"},e.createElement(n.TextLabel,{type:"T16",value:"Platform_Pages_Menu_Add_Dynamic_Page_Member_Title"}),e.createElement(n.RichText,{type:"T06"},a.translate("Platform_Pages_Menu_Add_Dynamic_Page_Member_Text"))),e.createElement(n.Composites.ActionSetVertical,{},e.createElement(n.Button,{onClick:this.props.addDynamicPage},e.createElement("span",{},a.translate("Platform_Pages_Menu_Add_Dynamic_Page_Add_Button")))))}}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView",["lodash","react","prop-types","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt"],function(e,a,t,n){"use strict";var i=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,a.Component),_createClass(t,[{key:"render",value:function(){return n.call(this)}}]),t}();return i.displayName="DynamicPagesIntroView",i.propTypes={title:t.string.isRequired,onClose:t.func.isRequired,onHelp:t.func.isRequired,addDynamicPage:t.func.isRequired},i}),define("pages/panel/pagesPanelMapper",["lodash","tpa","core","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","constants","stateManagement","pages/panel/getPages","wixData"],function(U,i,o,L,x,u,r,n,H,G){"use strict";var F=function(e,t){var a=e.dsRead.homePage.get(),n=e.menus.getSelectedMenuItemByPageId(t,a);return{selectedPageId:a,selectedMenuItemId:n.id,selectedTabId:n.menuId}},j=function(e,a,t){var n=U.find(t,function(e){var t=e.pagesData;return U.some(t,{id:a})}),i=U.get(n,"id");return i?{selectedPageId:a,selectedTabId:i,selectedPageIsDynamic:!0}:null},W=function(e,a,t){var n=U.find(t,function(e){var t=e.pagesData;return U.some(t,{id:a})}),i=U.get(n,"id");return i?{selectedPageId:a,selectedTabId:i,selectedPageIsManagedByApp:!0}:null},Y=function(a,e){return U.get(U.find(e,function(e){var t=e.pagesData;return U.some(t,{id:a})}),"id")},s=function(e,t,a){var n=a.editorAPI;i.superApps.openDashboardUrl(i.superApps.superAppsConstants.ECOM_APP_DEF_ID),n.bi.event(u.events.topbar.pages.top_bar_PAGES_store_pages_store_manager_click)},p=function(e,t,a){var n=a.editorAPI,i=n.dsRead.platform.editorApps.DATA_BINDING.appDefId,s=n.dsRead.platform.getAppDataByAppDefId(i).applicationId;n.dsActions.platform.notifyApplication(s,{eventType:"addDynamicPageClicked",eventPayload:{origin:"pagesPanel"}}),n.bi.event(u.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,{category:"add_dynamic_page",origin:"dynamic_page_intro"})};return{mapStateToProps:function(e,t){var a,n,i,s,o,r,p,l,u,d,c,g,m,f,P,b,y,I,h,_=e.editorAPI,A=e.dsRead.pages.getPagesData(),v=_.isDesktopEditor(),S=(a=_,n=v,U.map(H.routers(a),function(e){return e.actions=x.router(a,n,e.applicationId,e.prefix,e.biCategory,e.isSpecial,e.routerType),e})),C=U.filter(S,"isSpecial"),T=U.reject(S,"isSpecial"),E=(i=_,s=A,o=v,U.map(H.tpas(i,s),function(e){return e.actions=x.tpaTab(i,e.id,o),e})),R=(r=_,p=A,l=v,U.map(H.menus(r,p),function(e){return e.actions=x.menuTab(r,e.appDefId,l),e})),M=(u=_,d=A,c=v,U.map(H.pagesManagedByApps(u,d),function(e){return e.actions=x.application(u,e.id,c,e.biCategory),e})),k=function(e,t,a,n,i,s){var o=e.pages.popupPages.getCurrentPopup();if(o){var r=e.pages.popupPages.getDataList(),p=U.get(U.find(r,["managingAppDefId","5f4fa4f1-5afd-4ac0-8a85-e5ac1d2b9b7d"]),"id"),l=s?L.SIGNUP.id:L.MAIN_MENU.id;return{selectedPageId:o.id,selectedTabId:o.id===p?l:L.POPUPS.id}}var u=e.pages.getCurrentUrlPageId();if(!u)return F(e,t);var d=W(e,u,i);if(U.get(d,"selectedTabId"))return d;var c=j(e,u,n);if(U.get(c,"selectedTabId"))return c;var g=e.menus.getSelectedMenuItemByPageId(t,u),m=g.menuId||Y(u,a);return m?{selectedPageId:u,selectedMenuItemId:U.get(g,"id"),selectedTabId:m}:F(e,t)}(_,R,E,S,M,v),D=k.selectedPageId,N=k.selectedPageIsDynamic,w=k.selectedMenuItemId,O=k.selectedTabId,V=k.selectedPageIsManagedByApp,q=function(e,t,a,n,i){if(!e)return null;var s=U.map(t,"id");return U.includes(s,i)?a:n}(t.renameEnabled,R,w,D,O),B=U.filter(H.popups(_),function(e){return!e.managingAppDefId});return{selectedPageId:D,selectedMenuItemId:w,selectedPageIsDynamic:N,selectedTabId:O,selectedPageIsManagedByApp:V,initialTabId:function(e,t,a){if(t){if("CUSTOM_MAIN_MENU"===t)return"CUSTOM_MAIN_MENU";var n=e.dsRead.menu.getById(t).appId,i=U.find(a,["applicationId",n]);return U.get(i,"id")}return null}(_,t.menuId,S)||O,pagesData:A,menus:R,specialRouters:C,userRouters:T,tpas:E,appPages:M,popups:B,isDesktop:v,renamedItemId:q,biPanelName:"pages_panel",shouldShowDynamicPagesIntroTab:(h=_,Boolean(h.developerMode.isEnabled())||G.isDataModeOn(h)),hasRestrictedPage:(I=_,U.find(I.dsRead.pages.getPagesData().map(function(e){return U.get(e,"pageSecurity.requireLogin")}))),hasCustomSignupLightbox:(f=_,P=f.dsRead.siteMembers.getCustomSignupPageId(),b=f.components.get.byId(P),y=b&&f.components.getChildren(b)||[],U.some(y,function(e){return"wysiwyg.viewer.components.FormContainer"===f.components.getType(e)})),selectedTransition:(g=_,m=g.pages.transitions.get(),U.get({outIn:"outIn",crossfade:"crossfade",shrinkfade:"crossfade",swipeHorizontal:"swipeHorizontalFullScreen",swipeHorizontalFullScreen:"swipeHorizontalFullScreen",swipeVertical:"swipeVerticalFullScreen",swipeVerticalFullScreen:"swipeVerticalFullScreen",none:"none"},m,"none")),forceOpenPagesPanelCounter:_.getForceOpenPagesPanelEventCounter()}},mapDispatchToProps:function(a,e){var t=e.panelName;return{onHelp:function(e){return a((s=t,o=e,function(e,t,a){var n=a.editorAPI,i={panel_name:s,origin:r.BI.HELP.ORIGIN.PAGES_PANEL,learn_more:!0};n.panelManager.openHelpCenter(o,null,i)}));var s,o},onClose:function(){return a((n=t,function(e,t,a){a.editorAPI.panelManager.closePanelByName(n)}));var n},isTPASubPage:function(e){return a((s=e,function(e,t,a){var n=a.editorAPI,i=(0,a.dsRead.pages.data.get)(s);return o.utils.tpaTypeUtils.isTPASpecialPage(n.dsRead,i)}));var s},getPageData:function(e){return a((n=e,function(e,t,a){return a.dsRead.pages.data.get(n)}));var n},openStoreManager:function(){return a(s)},biEvent:function(e,t){return a(n.editorPlugins.bi.actions.event(e,t))},addDynamicPage:function(){return a(p)},onClickTransition:function(e){var l;a((l=e,function(e,t,a){var n=a.editorAPI,i=function(e){return U.trim(e.link.pageId,"#")};n.pages.transitions.set(l),n.bi.event(u.events.pages.pagesPanel.page_transition_selected_click,{category:l});var s=n.dsRead.pages.getPrimaryPageId(),o=U(n.dsRead.mainMenu.getMenu(!0)).flatMap(function(e){return[e].concat(_toConsumableArray(e.items))}).filter(function(e){return"PageLink"===U.get(e,"link.type")&&!n.dsRead.pages.popupPages.isPopup(i(e))}).map(i).value(),r=o.indexOf(s),p=(r+1)%o.length;p!==r&&n.pages.navigateTo(o[p]),n.waitForChangesApplied(function(){n.pages.navigateTo(o[r])})}))}}}}}),define("pages/panel/tabs/panelTabs.rt",["react","lodash","util","baseUILib","santa-editor-symbols"],function(i,a,e,s,o){"use strict";return function(){return i.createElement("div",{className:"tabs-pp"},i.createElement(s.CustomScroll,{},i.createElement.apply(this,["ul",{},a.map(this.getTabs(),function(e,t){return i.createElement("li",{onClick:function(e,t){this.handleClick(e)}.bind(this,e,t),key:"li-"+e.id,"data-aid":"tab-"+e.title,className:"tab"},i.createElement("div",{className:"container-for-background "+a({selected:this.props.selectedTabId===e.id}).transform(function(e,t,a){t&&e.push(a)},[]).join(" ")},i.createElement(s.TooltipOnEllipsis,{marginTop:9},i.createElement("div",{className:"title"},e.title)),i.createElement(s.Tooltip,{marginTop:6,className:"actions-tooltip",content:"NewPages_Panel_Left_SiteMenu_Actions_Label",closeOnMouseClick:!0},a.isEmpty(e.actions)?null:i.createElement.apply(this,[s.ContextMenu,{customButton:this.getActionsButton(e.id),automationId:"context-menu-"+e.id,key:"tab-context-menu",onToggle:function(e,t,a){this.handleContextMenuToggle(e,a)}.bind(this,e,t)},a.map(e.actions,function(e,t,a,n){return i.createElement(s.ContextMenuAction,{onClick:a.onClick,key:"action-"+a.title},i.createElement(o.symbol,{name:a.symbolName}),i.createElement("span",{},a.title))}.bind(this,e,t))]))),e.separatorAfter?i.createElement(s.Divider,{key:"separator-after-"+e.id}):null)}.bind(this))])))}}),define("pages/panel/tabs/panelTabs",["react","prop-types","lodash","util","santa-editor-symbols","pages/utils/pageCategories","coreBi","experiment","pages/panel/tabs/panelTabs.rt"],function(a,e,o,s,i,r,p,l,n){"use strict";var u=function(e){var t=e.id,a=e.title,n=e.group,i=e.biCategory;return{id:t,title:s.translate(a),group:n,biCategory:i}},d=function(e){return e.group===r.MENUS.group?r.MENUS.getBiCategory(e.id):e.group===r.TPA_PAGES.group?r.TPA_PAGES.getBiCategory(e.id):e.biCategory},t=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.shouldDisplaySignupTab=function(){return l.isOpen("se_customRegistrationPagesPanel")&&n.props.isDesktop&&n.props.hasRestrictedPage||n.props.hasCustomSignupLightbox},n.getTabs=function(){var a,e=function(e,t,a){if(t&&o.isEmpty(a)&&e)return[u(r.DYNAMIC_PAGES_INTRO)];var i=[];return o.forEach(a,function(e){var t=e.id,a=e.title,n=e.actions;i.push({id:t,title:a,actions:n,group:r.DYNAMIC_PAGES.group,biCategory:r.DYNAMIC_PAGES.biCategory})}),i}(n.props.shouldShowDynamicPagesIntroTab,n.props.isDesktop,n.props.userRouters),s=[];return o.forEach(n.props.menus,function(e){var t=e.id,a=e.title,n=e.actions;s.push({id:t,title:a,actions:n,group:r.MENUS.group})}),o.isEmpty(n.props.specialRouters)||o.forEach(n.props.specialRouters,function(e){var t=e.id,a=e.title,n=e.actions,i=e.biCategory;s.push({id:t,title:a,actions:n,group:r.SPECIAL_PAGES.group,biCategory:i})}),n.shouldDisplaySignupTab()&&s.push(u(r.SIGNUP)),o.isEmpty(n.props.appPages)||o.forEach(n.props.appPages,function(e){var t=e.id,a=e.title,n=e.actions,i=e.biCategory;s.push({id:t,title:a,actions:n,group:r.APPLICATION_PAGES.group,biCategory:i})}),o.forEach(n.props.tpas,function(e){var t=e.id,a=e.title,n=e.actions;s.push({id:t,title:a,actions:n,group:r.TPA_PAGES.group})}),s=s.concat(e),o.isEmpty(n.props.popups)||s.push(u(r.POPUPS)),a=s,s=o.map(a,function(e,t){return e.separatorAfter=t===a.length-1,e}),n.props.isDesktop?s.push(u(r.TRANSITIONS)):o.last(s).separatorAfter=!1,s},n.handleContextMenuToggle=function(e,t){t&&n.props.biEvent(p.events.pages.pagesPanel.tab_clicked_on_settings,{category:d(e)})},n.getActionsButton=function(e){return a.createElement("div",{key:"actions-button-"+e},a.createElement(i.symbol,{name:"settingsActionSmall"}))},n.handleClick=function(e){n.props.biEvent(p.events.pages.pagesPanel.category_click,{category:d(e)}),n.props.onClickTab(e.id)},n}return _inherits(t,a.Component),_createClass(t,[{key:"render",value:function(){return n.call(this)}}]),t}();return t.displayName="PanelTabs",t.propTypes={popups:e.arrayOf(e.object).isRequired,userRouters:e.arrayOf(e.object).isRequired,specialRouters:e.arrayOf(e.object).isRequired,appPages:e.arrayOf(e.object).isRequired,tpas:e.arrayOf(e.object).isRequired,menus:e.arrayOf(e.object).isRequired,onClickTab:e.func.isRequired,selectedTabId:e.string,biEvent:e.func.isRequired,shouldShowDynamicPagesIntroTab:e.bool.isRequired,hasCustomSignupLightbox:e.bool,hasRestrictedPage:e.bool,isDesktop:e.bool.isRequired},t}),define("pages/panel/pagesPanel.rt",["react","lodash","pages/panel/tabs/panelTabs","util","panels","pageSettingsPanel"],function(n,e,i,t,s,o){"use strict";return function(){return function(){var e=o.settingsPanels.main,t=o.settingsPanels.tpaSubPage,a=o.settingsPanels.signup;return n.createElement(s.frames.leftPanelFrame,{className:"left-panel-frame-pages-panel-pp",ref:"pagesPanel",panelName:this.props.panelName,panelIndex:this.props.panelIndex,panelClass:"pages-panel-pp"},n.createElement(i,{onClickTab:this.handleClickTab,selectedTabId:this.state.selectedTabId,popups:this.props.popups,hasCustomSignupLightbox:this.props.hasCustomSignupLightbox,shouldShowDynamicPagesIntroTab:this.props.shouldShowDynamicPagesIntroTab,hasRestrictedPage:this.props.hasRestrictedPage,userRouters:this.props.userRouters,specialRouters:this.props.specialRouters,tpas:this.props.tpas,appPages:this.props.appPages,isDesktop:this.props.isDesktop,menus:this.props.menus,biEvent:this.props.biEvent}),"\n    ",this.getView(),"\n    ",!this.showSignupSettings()&&this.showRegularSettings()?n.createElement(e,{key:"shouldShowMainSettings",menuItem:this.getSettingsItem(),menuId:this.state.settingsData.menuId,activeTabType:this.state.settingsData.tabType,closeSettingsPanel:this.handleCloseSettings,token:"dffdfadsfa",actions:{closeSettingsPanel:this.handleCloseSettings}}):null,this.showSignupSettings()?n.createElement(a,{key:"shouldShowSignupSettings",closeSettingsPanel:this.handleCloseSettings}):null,this.showSignupSettings()||!this.showSettingsForTPASubPage()||this.showRegularSettings()?null:n.createElement(t,{key:"shouldShowTpaSubPageSettings",ref:"settingsPanel",menuItem:this.getSettingsItem(),closeSettingsPanel:this.handleCloseSettings,activeTabType:this.state.settingsData.tabType,actions:{openStoreManager:this.props.openStoreManager}}))}.apply(this,[])}}),define("pages/panel/pagesPanel",["react","prop-types","lodash","util","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/signupView","pages/panel/pagesView/editorAPIConnectors/popupView","pages/panel/pagesView/editorAPIConnectors/dynamicPagesView","pages/panel/pagesView/editorAPIConnectors/appPagesView","pages/panel/pagesView/editorAPIConnectors/tpaView","pages/panel/menuView/menuView","pages/panel/transitionsView/transitionsView","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView","pages/panel/pagesPanelMapper","pages/panel/pagesPanel.rt"],function(a,e,n,s,o,r,p,l,u,d,c,g,m,t,i){"use strict";var f=s.hoc,P=f.connect,b=f.STORES.EDITOR_API;function y(e,t){return n.some(t.tpas,{id:e})}function I(e,t){return n.some(t.userRouters,{id:e})||n.some(t.specialRouters,{id:e})}var h=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.getInitialSettingsData=function(){return e.initialSettingsTabType?{tabType:e.initialSettingsTabType,pageId:e.selectedPageId}:null},i.state={selectedTabId:i.props.initialTabId,nonPageItemSelected:!1,userSelectedPageId:null,settingsData:i.getInitialSettingsData(),renamedItemId:i.props.renamedItemId||null},i.getView=function(){var e=void 0,t=i.state.selectedTabId;return t===o.TRANSITIONS.id?e=g:t===o.DYNAMIC_PAGES_INTRO.id?e=m:n.some(i.props.menus,{id:t})?e=c:t===o.SIGNUP.id?e=r:t===o.POPUPS.id?e=p:y(t,i.props)?e=d:I(t,i.props)?e=l:n.some(i.props.appPages,{id:t})&&(e=u),a.createElement(e,{pagesData:i.props.pagesData,onClose:i.props.onClose,onHelp:i.props.onHelp,selectedMenuItemId:i.props.selectedMenuItemId,selectedPageId:i.props.selectedPageId,renamedItemId:i.state.renamedItemId,title:s.translate(n.get(o[t],"title")),onShowSettings:i.handleShowSettings,onItemAdded:function(e){return i.setState({renamedItemId:e,settingsData:null})},onRename:function(){return i.setState({renamedItemId:null})},isDesktop:i.props.isDesktop,popups:i.props.popups,menu:n.find(i.props.menus,{id:t}),router:n.find(i.props.userRouters,{id:t})||n.find(i.props.specialRouters,{id:t}),appData:n.find(i.props.appPages,{id:t}),tpa:n.find(i.props.tpas,{id:t}),selectedTransition:i.props.selectedTransition,onClickTransition:i.props.onClickTransition,onSelectNonPageItem:function(){i.handleCloseSettings(),i.setState({nonPageItemSelected:!0,userSelectedPageId:null})},onSelectPageItem:function(e){return i.setState({nonPageItemSelected:!1,userSelectedPageId:e})},addDynamicPage:i.props.addDynamicPage,biPanelName:i.props.biPanelName})},i.handleClickTab=function(e){return i.setState({selectedTabId:e,settingsData:null})},i.handleChangeShownSettings=function(t){t?i.setState(function(e){return{settingsData:n.assign(e.settingsData,{tabType:t.tabType,pageId:t.pageId})}}):i.handleCloseSettings()},i.handleCloseSettings=function(){return i.setState({settingsData:null})},i.handleShowSettings=function(t){i.setState(function(e){return{settingsData:n.assign({},e.settingsData,t)}})},i.getSettingsItem=function(){var e=n.get(i.state.settingsData,"pageId")||i.props.selectedPageId,t=e&&i.props.getPageData(e);return{pageData:t,label:n.get(t,"title")}},i.updateSelectedTabIdIfDeleted=function(e){var t=i.state.selectedTabId,a=y(t,i.props)&&!y(t,e),n=I(t,i.props)&&!I(t,e);(a||n)&&i.setState({selectedTabId:e.selectedTabId,nonPageItemSelected:!1})},i.showSettingsForTPASubPage=function(){return i.state.settingsData&&n.get(i.state.settingsData,"pageId")&&!i.state.settingsData.isCustomSignup&&i.props.isTPASubPage(i.state.settingsData.pageId)&&!i.props.selectedPageIsDynamic&&!i.props.selectedPageIsManagedByApp},i.showSignupSettings=function(){return i.state.settingsData&&i.state.settingsData.isCustomSignup},i.showRegularSettings=function(){return!!i.state.settingsData&&((i.state.settingsData.pageId&&!i.props.isTPASubPage(i.state.settingsData.pageId)||i.props.selectedPageIsDynamic||i.props.selectedPageIsManagedByApp)&&!i.state.settingsData.isCustomSignup)},i}return _inherits(t,a.Component),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedPageId!==e.selectedPageId,a=this.state.selectedTabId===o.TRANSITIONS.id||this.state.selectedTabId===o.SIGNUP.id||this.state.userSelectedPageId===e.selectedPageId;this.state.settingsData&&t&&this.handleChangeShownSettings({tabType:null,pageId:e.selectedPageId});var n=!t&&e.selectedTabId!==this.props.selectedTabId;(e.selectedTabId&&!a&&t&&!this.state.nonPageItemSelected||n)&&this.setState({selectedTabId:e.selectedTabId}),e.forceOpenPagesPanelCounter>this.props.forceOpenPagesPanelCounter&&(e.renamedItemId!==this.state.renamedItemId&&(this.setState({renamedItemId:e.renamedItemId}),e.selectedTabId!==this.state.selectedTabId&&this.setState({selectedTabId:e.selectedTabId})),e.initialSettingsTabType&&this.handleShowSettings({tabType:e.initialSettingsTabType,pageId:e.selectedPageId})),this.updateSelectedTabIdIfDeleted(e)}},{key:"render",value:function(){return i.call(this)}}]),t}();h.displayName="PagesPanel",h.propTypes={pagesData:e.arrayOf(e.object).isRequired,selectedPageId:e.string.isRequired,selectedPageIsDynamic:e.bool,selectedPageIsManagedByApp:e.bool,selectedMenuItemId:e.string,selectedTabId:e.string,initialTabId:e.string,renamedItemId:e.string,menus:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,applicationId:e.string})).isRequired,userRouters:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object).isRequired,prefix:e.string.isRequired,biCategory:e.string.isRequired})).isRequired,specialRouters:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object).isRequired,prefix:e.string.isRequired,isSpecial:e.bool.isRequired,biCategory:e.string.isRequired})).isRequired,tpas:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object).isRequired})).isRequired,appPages:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object),biCategory:e.string.isRequired,helpId:e.string.isRequired,emptyStateUrl:e.string})).isRequired,popups:e.arrayOf(e.object).isRequired,panelName:e.string,onClose:e.func.isRequired,onHelp:e.func.isRequired,getPageData:e.func.isRequired,isTPASubPage:e.func.isRequired,openStoreManager:e.func.isRequired,isDesktop:e.bool.isRequired,biEvent:e.func.isRequired,biPanelName:e.string.isRequired,selectedTransition:e.string.isRequired,onClickTransition:e.func.isRequired,shouldShowDynamicPagesIntroTab:e.bool.isRequired,addDynamicPage:e.func.isRequired,initialSettingsTabType:e.string,forceOpenPagesPanelCounter:e.number},h.defaultProps={panelName:"pagesPanel"};var _=P(b,t.mapStateToProps,t.mapDispatchToProps)(h);return _.pure=h,_}),define("pages/quickNavigation/quickNavigationMapper",["lodash","util","stateManagement","pages/utils/pageCategories","coreBi","pages/panel/getPages"],function(M,a,k,D,r,N){"use strict";var p="quick_navigation",t="RECENTLY-",w=function(e,t){return 0<t&&{title:a.translate(e.title)}},O=function(e){return M.flatMap(e,function(e){var t=e.title,a=e.pagesData,n=e.biCategory;return[{title:t}].concat(_toConsumableArray(M.map(a,function(e){return{id:e.id,title:e.label,biCategory:n}})))})},V=function t(e,a,n){var i=D.MENUS.getBiCategory(a);if(!M.isEmpty(e.items)){var s=M(e.items).flatMap(function(e){return t(e,a,!0)}).compact().value();if(!M.isEmpty(s))return[{id:M.get(e.pageData,"id",e.id),title:M.get(e.pageData,"title",e.label),isFolder:e.type.isDropdown,isLink:e.type.isLink,biCategory:i}].concat(_toConsumableArray(s))}return e.type.isPage?{id:e.pageData.id,title:e.pageData.title,isNested:n,biCategory:i}:null},n=function(e){return M.startsWith(e,t)},c=function(e){return n(e)?M.trimStart(e,t):e},g=function(e){return""+(n(e)?"":t)+e},e=function(e,t,a){var n,i,s,o,r,p,l,u,d,c=a.editorAPI,g=c.dsRead.pages.getPagesData(),m=c.dsRead.siteMembers.getCustomSignupPageId(),f=N.popups(c),P=M.filter(f,function(e){return!e.managingAppDefId}),b=m?M.filter(f,function(e){return"5f4fa4f1-5afd-4ac0-8a85-e5ac1d2b9b7d"===e.managingAppDefId}):[],y=N.routers(c),I=N.pagesManagedByApps(c,g,!1),h=(n=I,M.flatMap(n,function(e){var t=e.title,a=e.pagesData,n=e.biCategory;return a?[{title:t}].concat(_toConsumableArray(M.map(a,function(e){return{id:e.id,title:e.title,biCategory:n}}))):[]})),_=O(M.filter(y,"isSpecial")),A=O(M.reject(y,"isSpecial")),v=(i=c,s=g,M.flatMap(N.tpas(i,s),function(e){var t=e.title,a=e.pagesData;return[{title:t}].concat(_toConsumableArray(a))})),S=M.flatMap([P,b,_,A,v,h]).length,C=N.menus(c,g,!0),T=(o=C,M.flatMap(o,function(e){var t=e.id,a=e.title,n=e.menuItems,i=M(n).flatMap(function(e){return V(e,t)}).compact().value();if(!M.isEmpty(i))return[{title:a}].concat(_toConsumableArray(i))})),E=T.length-C.length,R=(r=c,S+E<18?[]:k.editorPlugins.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(r.store.getState())||[]);return p=T,l=S,u=R.length,d=C.length,l+u===0&&1===d&&(p[0]=null),M.compact([w({title:"NewPages_QuickNav_Pages_Recently_Viewed_Label"},R.length)].concat(_toConsumableArray(R),_toConsumableArray(T),_toConsumableArray(_),_toConsumableArray(h),_toConsumableArray(A),_toConsumableArray(v),[w(D.POPUPS,P.length)],_toConsumableArray(P),[w(D.SIGNUP,b.length)],_toConsumableArray(b)))},i=function(e,t,a){var n=a.editorAPI;n.panelManager.openPanel("pages.pagesPanel"),n.bi.event(r.events.pages.click_on_pages_panel_open,{origin:p})},s=function(e,t,a){return a.editorAPI.panelManager.closeAllPanels()};return{mapStateToProps:function(e){var t,a,n,i=e.editorAPI;return{selectedItem:(a=i,n=M.invoke(a,"dsRead.pages.getFocusedPageId"),n?{id:n,title:a.pages.getPageTitle(n),isHomePage:a.pages.isHomePage(n)}:null),closePopupPage:i.pages.popupPages.close,isPopupOpened:!!M.invoke(i,"dsRead.pages.popupPages.isPopupOpened"),backToAdiTooltipVisibility:(t=i,k.editorPlugins.topBar.selectors.getBackToAdiTooltipVisibility(t.store.getState()))}},mapDispatchToProps:function(n){return{getItems:function(){return n(e)},onClickItem:function(e){var s,o,t=e.id,a=e.biCategory;return n((s=t,o=a,function(e,t,a){var n=a.editorAPI,i=c(s);n.pages.navigateTo(i),n.bi.event(r.events.pages.navigate_to_page,{page_id:i,panel_name:p,category:o})}))},onClickManagePages:function(){return n(i)},biEvent:function(e,t){n(k.editorPlugins.bi.actions.event(e,t))},closeAllPanels:function(){return n(s)},updateRecentlyViewedPages:function(e){return n((d=e,function(e,t,a){var n=a.editorAPI;if(!d)return[];var i=d.id,s=d.title,o=d.isHomePage,r=M.cloneDeep(k.editorPlugins.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(n.store.getState()))||[];if(M.isEmpty(r)&&o)return[];var p=M.find(r,{id:g(i)}),l=Date.now();p?(p.time=l,p.title=s):r.push({time:l,id:g(i),title:s,biCategory:"recently_viewed"});var u=M(r).sortBy("time").filter(function(e){return n.pages.isPageExist(c(e.id))}).reverse().slice(0,3).value();n.store.dispatch(k.editorPlugins.userPreferences.actions.setSiteUserPreferences("recentlyViewedPages",u))}));var d},closeBackToAdiTooltip:function(){return n(k.editorPlugins.topBarTooltip.actions.closeBackToAdiTooltip())}}},PANEL_NAME:p}}),define("pages/quickNavigation/quickNavigation.rt",["react","lodash","baseUILib","util","santa-editor-symbols"],function(e,t,a,n,i){"use strict";return function(){return e.createElement("div",{className:"quick-navigation-pp",onMouseEnter:this.handleMouseEnter,onClick:this.onClick},e.createElement("div",{className:"exit-lightbox "+t({"active-exit-lightbox":this.props.isPopupOpened}).transform(function(e,t,a){t&&e.push(a)},[]).join(" "),onClick:this.props.closePopupPage,key:"exit-lightbox"},e.createElement("span",{},n.translate("PopUps_TopBar_Exit")),e.createElement(i.symbol,{name:"zoomClose"})),e.createElement(a.DropDown,{value:this.getSelectedItemId(),onChange:this.handleClickItem,shouldTranslate:!1,searchBox:!0,onToggle:this.handleToggle,forceOpen:this.state.forceOpen,dataLabel:n.translate("NewPages_QuickNav_Label"),optionsContainerClassName:"dropdown-quick-navigation-pp"},this.getContent(),e.createElement(a.DropDownStickyFooter,{closeOnClick:!0},e.createElement(a.Button,{className:"btn-text",onClick:this.props.onClickManagePages},e.createElement("span",{className:"manage-pages-text"},n.translate("NewPages_QuickNav_Pages_Manage_Button"))))),e.createElement(a.Bubble,{className:"bubble-quick-navigation-pp",arrowAlignment:"top",arrowStyle:{position:"relative",left:"104px",top:"-97px"},contentStyle:this.bubbleContentStyle},e.createElement(a.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_TITLE",type:"T03",className:"bubble-title-quick-navigation-pp",enableEllipsis:!1}),e.createElement(a.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_BODY",enableEllipsis:!1})))}}),define("pages/quickNavigation/quickNavigation",["lodash","react","prop-types","util","baseUILib","pages/quickNavigation/quickNavigationMapper","coreBi","pages/quickNavigation/quickNavigation.rt"],function(i,s,e,t,o,n,r,p){"use strict";var a=t.hoc,l=a.connect,u=a.renderWhenMutated,d=a.STORES.EDITOR_API,c=function(e){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={items:e.selectedItem?t.props.getItems():[],forceOpen:!1},t.handleMouseEnter=function(){t.setState({items:t.props.getItems()}),t.props.backToAdiTooltipVisibility&&t.props.closeBackToAdiTooltip()},t.getContent=function(){return i.flatMap(t.state.items,function(e){return e.id?(t=e,s.createElement(o.DropDownOption,{value:t.id,label:t.title,shouldTranslate:!1,disabled:t.isFolder||t.isLink,optionWrapperClassName:(a=t,a.isNested?"nested-page":a.isFolder?"folder":a.isLink?"link":void 0),key:t.id})):(n=e.title,[s.createElement(o.SectionDivider,{className:"upper",key:i.uniqueId("section-divider")},i.toUpper(n))]);var t,a,n})},t.getSelectedItemId=function(){return t.props.selectedItem?t.props.selectedItem.id:null},t.handleClickItem=function(e){return t.props.onClickItem(i.find(t.state.items,{id:e}))},t.onClick=function(){t.props.biEvent(r.events.topbar.top_bar_click,{category:n.PANEL_NAME}),t.props.biEvent(r.events.pages.quick_navigation_clicked,{origin:"top_bar"})},t.handleToggle=function(e){e?t.props.closeAllPanels():t.setState({forceOpen:!1})},t}return _inherits(a,s.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(e){var t,a,n,i,s;t=this.props.selectedItem,a=e.selectedItem,n=!t&&a,i=t&&t.id!==a.id,s=t&&t.id===a.id&&t.title!==a.title,(n||i||s)&&(this.props.updateRecentlyViewedPages(e.selectedItem),this.setState({items:e.getItems()})),e.forceOpenEventCounter>this.props.forceOpenEventCounter&&this.setState({items:e.getItems(),forceOpen:!0})}},{key:"render",value:function(){return p.call(this)}}]),a}();c.displayName="QuickNavigation",c.propTypes={onClickItem:e.func.isRequired,onClickManagePages:e.func.isRequired,getItems:e.func.isRequired,closePopupPage:e.func,isPopupOpened:e.bool,selectedItem:e.shape({id:e.string.isRequired,title:e.string.isRequired,isHomePage:e.bool.isRequired}),updateRecentlyViewedPages:e.func.isRequired,forceOpenEventCounter:e.number,biEvent:e.func,closeAllPanels:e.func,backToAdiTooltipVisibility:e.bool,closeBackToAdiTooltip:e.func,currentPageId:e.string};var g=l(d,n.mapStateToProps,n.mapDispatchToProps)(u(c));return g.pure=c,g}),define("pages",["pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages","pages/panel/pagesPanel","pages/quickNavigation/quickNavigation"],function(e,t,a,n){"use strict";return{getActions:e,getPages:t,pagesPanel:a,quickNavigation:n}});
//# sourceMappingURL=pages.min.js.map